import{I as oe,d as tt,j as H,y as st,s as lt,k as nt,c as i,g as n,a as t,u as s,h as ot,f as m,t as d,p as W,b as c,F as k,e as _,r as f,w as r,o,i as V,P as at,n as me,q as G,E as it,R as rt,m as dt,A as ut}from"./app-B3a6RFBA.js";import{_ as ct}from"./Heading.vue_vue_type_script_setup_true_lang-Dca_pkgq.js";import{_ as mt}from"./DnsSettings.vue_vue_type_script_setup_true_lang-BRuP6ja_.js";import{_ as ve}from"./Modal.vue_vue_type_script_setup_true_lang-B7--Ro30.js";import{Y as S,d as pe,e as fe,f as ye,B as xe,$ as he,I as y,X as P,H as te,V as vt,D as ge}from"./craft-ui-DyvEPCxV.js";import{L as se}from"./loader-circle-DAxsOTxC.js";import{F as pt,K as ft,S as yt}from"./star-mSXr8-sW.js";import{R as xt}from"./refresh-cw-BxYmm0t-.js";import{T as be}from"./triangle-alert-CVFkzwHL.js";import{T as le}from"./trash-2-C0PxlOCX.js";import{P as ke}from"./pencil-cchw7zKd.js";import{C as ht}from"./copy-B7NJqpay.js";import"./circle-alert-9TtTjYpl.js";const gt=oe("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const _e=oe("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);const ne=oe("stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]),bt={class:"mb-8"},kt={class:"text-zinc-400 mt-1"},_t={class:"grid grid-cols-2 gap-8 py-6"},wt={class:"text-sm text-zinc-500 mt-1"},St={class:"relative"},zt={key:0,class:"mt-2 text-sm text-red-400"},Ct={key:1,class:"mt-2 text-sm text-amber-400"},Vt={class:"grid grid-cols-2 gap-8 py-6"},$t={class:"grid grid-cols-2 gap-8 py-6"},Et={class:"space-y-4"},Tt={key:0,class:"mt-1 text-sm text-red-400"},Ut={class:"grid grid-cols-2 gap-4"},Pt={key:0,class:"mt-1 text-sm text-red-400"},Dt={key:0,class:"mt-1 text-sm text-red-400"},At={class:"flex justify-end py-6"},Ft={class:"py-6"},Ht={key:0,class:"text-zinc-500 text-sm"},Nt={class:"grid grid-cols-2 gap-8 py-6"},jt={class:"space-y-2"},Kt=["onClick"],Mt={class:"grid grid-cols-2 gap-8 py-6"},Rt={class:"text-sm text-zinc-500 mt-1"},It={class:"grid grid-cols-2 gap-8 py-6"},Ot={class:"flex justify-end py-6"},Bt={class:"py-6"},Lt={class:"py-6"},qt={class:"grid grid-cols-2 gap-8"},Yt={class:"space-y-4"},Xt={class:"flex items-center justify-between"},Jt={key:0,class:"space-y-3"},Wt={class:"py-6"},Gt={class:"grid grid-cols-2 gap-8"},Zt={class:"space-y-4"},Qt={key:0,class:"text-center py-6 text-zinc-500"},es={key:1,class:"space-y-3"},ts={class:"min-w-0 flex-1"},ss={class:"flex items-center gap-2"},ls={class:"text-sm font-medium text-white"},ns={class:"mt-0.5 font-mono text-xs text-zinc-500"},os={class:"ml-4 flex items-center gap-1"},as={key:0,class:"py-6"},is={class:"grid grid-cols-2 gap-8"},rs={class:"space-y-4"},ds={key:0,class:"text-center py-6 text-zinc-500"},us={key:1,class:"space-y-3"},cs={class:"min-w-0 flex-1"},ms={class:"flex items-center gap-2"},vs={class:"text-sm font-medium text-white"},ps={class:"mt-0.5 truncate font-mono text-xs text-zinc-500"},fs={class:"ml-4 flex items-center gap-1"},ys={key:1,class:"border-zinc-800"},xs={key:2,class:"py-6"},hs={class:"grid grid-cols-2 gap-8 mb-6"},gs={class:"flex items-center"},bs={class:"grid grid-cols-2 gap-8"},ks={class:"flex items-center"},_s={key:3,class:"border-zinc-800"},ws={class:"py-6"},Ss={class:"flex items-center justify-between mb-6"},zs={class:"flex items-center gap-2"},Cs={key:0,class:"p-4 bg-red-900/20 border border-red-800 rounded-lg mb-4"},Vs={class:"flex items-center gap-2 text-red-400"},$s={key:1,class:"space-y-2"},Es={class:"flex items-center gap-4 mb-4 text-sm"},Ts={class:"text-lime-400"},Us={key:0,class:"text-amber-400"},Ps={key:1,class:"text-red-400"},Ds=["onClick"],As={class:"flex items-center gap-3"},Fs={class:"text-white font-medium"},Hs={class:"text-sm text-zinc-400 mt-0.5"},Ns={class:"flex items-center gap-2"},js={key:0,class:"px-4 py-3 bg-zinc-900/50 border-t border-zinc-700/50"},Ks={class:"space-y-2 text-sm"},Ms={class:"text-zinc-500 w-32 flex-shrink-0"},Rs={class:"text-zinc-300 font-mono break-all"},Is={key:1,class:"text-xs"},Os={key:2,class:"text-center py-8 text-zinc-500"},Bs={key:4,class:"py-6"},Ls={class:"grid grid-cols-2 gap-8"},qs={key:0},Ys={key:1,class:"space-y-4"},Xs={class:"flex items-start gap-3 p-3 bg-red-900/20 rounded-lg"},Js={class:"text-sm text-red-400/80"},Ws={class:"text-red-300"},Gs={class:"flex gap-3"},Zs={class:"p-6 space-y-4"},Qs={key:0},el=["value","data-name"],tl={class:"flex justify-end gap-4 px-6 py-4 border-t border-zinc-800"},sl={class:"p-6 space-y-4"},ll={key:0},nl={key:1,class:"text-sm text-zinc-400"},ol={class:"flex justify-end gap-4 px-6 py-4 border-t border-zinc-800"},gl=tt({__name:"Settings",props:{environment:{},remoteApiUrl:{},editor:{},editorOptions:{},sshKeys:{},availableSshKeys:{},templateFavorites:{},notificationsEnabled:{type:Boolean},menuBarEnabled:{type:Boolean}},setup(h){const v=h,ae=document.querySelector('meta[name="csrf-token"]')?.content||"",R=lt(()=>!v.environment.is_local&&v.remoteApiUrl),p=H({name:v.environment.name,host:v.environment.host,user:v.environment.user,port:v.environment.port,editor_scheme:v.editor.scheme}),I=f(!1),$=f(null),O=f(!1),ie=f(null),Z=f(!0),B=f(!1),C=f([]),D=f(""),L=f("8.4"),re=f(["8.3","8.4","8.5"]),Q=f(!1),A=f(""),de=f("test"),F=f(!1),g=f(null),E=f(null),N=f(new Set),we={ssh:"SSH Connection",cli:"CLI Installation",docker:"Docker Services",api:"API Connectivity",environment_dns:"Environment DNS",local_dns:"Local DNS",config:"Configuration"};function Se(a){N.value.has(a)?N.value.delete(a):N.value.add(a)}const j=f(new Set);async function ue(){F.value=!0,E.value=null,g.value=null;try{const e=await(await fetch(`/environments/${v.environment.id}/doctor`)).json();e.success?g.value=e:E.value=e.error||"Health check failed"}catch{E.value="Failed to run health check"}finally{F.value=!1}}async function ze(a){j.value.add(a);try{const l=await(await fetch(`/environments/${v.environment.id}/doctor/fix/${a}`,{method:"POST",headers:{"X-CSRF-TOKEN":ae,"Content-Type":"application/json"}})).json();l.success?await ue():E.value=l.message||"Failed to fix issue"}catch{E.value="Failed to fix issue"}finally{j.value.delete(a)}}async function Ce(){if(!(!R.value||!v.remoteApiUrl)){I.value=!0,$.value=null;try{const e=await(await fetch(`${v.remoteApiUrl}/instance-info`)).json();e.success&&e.data?p.name=e.data.name:$.value=e.error||"Failed to load instance info"}catch{$.value="Failed to connect to remote environment"}finally{I.value=!1}}}async function Ve(){if(v.remoteApiUrl){O.value=!0,$.value=null;try{const e=await(await fetch(`${v.remoteApiUrl}/instance-info`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:p.name})})).json();e.success||($.value=e.error||"Failed to update name")}catch{$.value="Failed to connect to remote environment"}finally{O.value=!1}}}async function $e(){Z.value=!0;try{const e=await(await fetch(`/environments/${v.environment.id}/config`)).json();e.success&&(ie.value=e.data,C.value=[...e.data.paths||[]],C.value.length===0&&C.value.push(""),D.value=e.data.tld||"test",L.value=e.data.default_php_version||"8.4",de.value=e.data.tld||"test",e.data.available_php_versions?.length&&(re.value=e.data.available_php_versions))}catch(a){console.error("Failed to load config:",a)}finally{Z.value=!1}}async function Ee(){R.value&&await Ve(),p.post(`/environments/${v.environment.id}/settings`)}function Te(){C.value.push("")}function Ue(a){C.value.splice(a,1)}async function Pe(){const a=C.value.filter(e=>e.trim()!=="");if(a.length===0){alert("Please add at least one site path");return}B.value=!0;try{const l=await(await fetch(`/environments/${v.environment.id}/config`,{method:"POST",headers:{"X-CSRF-TOKEN":ae,"Content-Type":"application/json"},body:JSON.stringify({paths:a,tld:D.value.trim()||"test",default_php_version:L.value})})).json();l.success?(ie.value=l.data,de.value=D.value.trim()||"test"):alert("Failed to save config: "+(l.error||"Unknown error"))}catch{alert("Failed to save config")}finally{B.value=!1}}function De(){Q.value=!0,A.value=""}function Ae(){Q.value=!1,A.value=""}function Fe(){A.value===v.environment.name&&G.delete(`/environments/${v.environment.id}`,{onSuccess:()=>{}})}st(()=>{$e(),R.value&&Ce()});const T=H({external_access:v.environment.external_access??!1,external_host:v.environment.external_host??""}),ce=()=>{T.post(`/environments/${v.environment.id}/settings/external-access`)};nt(()=>T.external_access,(a,e)=>{e===!0&&a===!1&&ce()});const q=f(!1),U=f(null),b=H({name:"",public_key:""}),He=()=>{U.value=null,b.reset(),q.value=!0},Ne=a=>{U.value=a,b.name=a.name,b.public_key=a.public_key,q.value=!0},Y=()=>{q.value=!1,U.value=null,b.reset()},je=()=>{U.value?b.put(`/ssh-keys/${U.value.id}`,{onSuccess:Y}):b.post("/ssh-keys",{onSuccess:Y})},Ke=a=>{confirm("Delete this SSH key?")&&G.delete(`/ssh-keys/${a.id}`)},Me=a=>{G.post(`/ssh-keys/${a.id}/default`)},Re=async a=>{await navigator.clipboard.writeText(a.public_key)},Ie=a=>{const l=a.target.selectedOptions[0];if(l.value){b.public_key=l.value;const u=l.dataset.name;u&&!b.name&&(b.name=u)}},Oe=(a,e=80)=>a.length>e?a.substring(0,e)+"...":a,X=f(!1),z=f(null),x=H({repo_url:"",display_name:""}),Be=()=>{z.value=null,x.reset(),X.value=!0},Le=a=>{z.value=a,x.repo_url=a.repo_url,x.display_name=a.display_name,X.value=!0},J=()=>{X.value=!1,z.value=null,x.reset()},qe=()=>{z.value?x.put(`/template-favorites/${z.value.id}`,{onSuccess:J}):x.post("/template-favorites",{onSuccess:J})},Ye=a=>{confirm("Delete this template?")&&G.delete(`/template-favorites/${a.id}`)},Xe=a=>{const e=a.match(/(?:github\.com\/)?([^/]+)\/([^/]+)/);return e?e[2]:a},Je=()=>{!z.value&&x.repo_url&&!x.display_name&&(x.display_name=Xe(x.repo_url))},We=a=>{const e=a.startsWith("http")?a:`https://github.com/${a}`;window.open(e,"_blank")},K=H({enabled:v.notificationsEnabled}),Ge=()=>{K.enabled=!K.enabled,K.post("/settings/notifications")},M=H({enabled:v.menuBarEnabled}),Ze=()=>{M.enabled=!M.enabled,M.post("/settings/menu-bar")};return(a,e)=>(o(),i(k,null,[n(s(ot),{title:`Settings - ${h.environment.name}`},null,8,["title"]),t("div",null,[t("div",bt,[n(ct,{title:"Settings"}),t("p",kt,"Configure "+d(h.environment.name),1)]),t("form",{onSubmit:W(Ee,["prevent"])},[t("div",_t,[t("div",null,[e[17]||(e[17]=t("h3",{class:"text-sm font-medium text-white"},"Environment Name",-1)),t("p",wt,[e[16]||(e[16]=c(" Display name for this environment. ",-1)),R.value?(o(),i(k,{key:0},[e[14]||(e[14]=t("br",null,null,-1)),e[15]||(e[15]=t("span",{class:"text-xs text-zinc-600"},"Changes will be synced to the remote environment.",-1))],64)):m("",!0)])]),t("div",null,[t("div",St,[n(s(S),{modelValue:s(p).name,"onUpdate:modelValue":e[0]||(e[0]=l=>s(p).name=l),type:"text",id:"name",class:"w-full",disabled:I.value},null,8,["modelValue","disabled"]),I.value?(o(),_(s(se),{key:0,class:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 animate-spin text-zinc-500"})):m("",!0)]),s(p).errors.name?(o(),i("p",zt,d(s(p).errors.name),1)):m("",!0),$.value?(o(),i("p",Ct,d($.value),1)):m("",!0)])]),e[24]||(e[24]=t("hr",{class:"border-zinc-800"},null,-1)),t("div",Vt,[e[18]||(e[18]=t("div",null,[t("h3",{class:"text-sm font-medium text-white"},"Code Editor"),t("p",{class:"text-sm text-zinc-500 mt-1"}," Select your preferred editor for opening files in this environment. ")],-1)),t("div",null,[n(s(he),{modelValue:s(p).editor_scheme,"onUpdate:modelValue":e[1]||(e[1]=l=>s(p).editor_scheme=l)},{default:r(()=>[n(s(pe),{class:"w-full"},{default:r(()=>[n(s(fe),{placeholder:"Select editor"})]),_:1}),n(s(ye),null,{default:r(()=>[(o(!0),i(k,null,V(h.editorOptions,(l,u)=>(o(),_(s(xe),{key:u,value:u},{default:r(()=>[c(d(l),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])])]),e[25]||(e[25]=t("hr",{class:"border-zinc-800"},null,-1)),h.environment.is_local?m("",!0):(o(),i(k,{key:0},[t("div",$t,[e[22]||(e[22]=t("div",null,[t("h3",{class:"text-sm font-medium text-white"},"SSH Connection"),t("p",{class:"text-sm text-zinc-500 mt-1"}," Host, user, and port for SSH access. ")],-1)),t("div",Et,[t("div",null,[e[19]||(e[19]=t("label",{for:"host",class:"block text-sm font-medium text-zinc-400 mb-1"},"Host",-1)),n(s(S),{modelValue:s(p).host,"onUpdate:modelValue":e[2]||(e[2]=l=>s(p).host=l),type:"text",id:"host",class:"w-full font-mono"},null,8,["modelValue"]),s(p).errors.host?(o(),i("p",Tt,d(s(p).errors.host),1)):m("",!0)]),t("div",Ut,[t("div",null,[e[20]||(e[20]=t("label",{for:"user",class:"block text-sm font-medium text-zinc-400 mb-1"},"User",-1)),n(s(S),{modelValue:s(p).user,"onUpdate:modelValue":e[3]||(e[3]=l=>s(p).user=l),type:"text",id:"user",class:"w-full font-mono"},null,8,["modelValue"]),s(p).errors.user?(o(),i("p",Pt,d(s(p).errors.user),1)):m("",!0)]),t("div",null,[e[21]||(e[21]=t("label",{for:"port",class:"block text-sm font-medium text-zinc-400 mb-1"},"Port",-1)),n(s(S),{modelValue:s(p).port,"onUpdate:modelValue":e[4]||(e[4]=l=>s(p).port=l),type:"number",id:"port",class:"w-full font-mono"},null,8,["modelValue"]),s(p).errors.port?(o(),i("p",Dt,d(s(p).errors.port),1)):m("",!0)])])])]),e[23]||(e[23]=t("hr",{class:"border-zinc-800"},null,-1))],64)),t("div",At,[n(s(y),{type:"submit",disabled:s(p).processing||O.value,variant:"secondary"},{default:r(()=>[c(d(s(p).processing||O.value?"Saving...":"Save Environment"),1)]),_:1},8,["disabled"])])],32),e[62]||(e[62]=t("hr",{class:"border-zinc-800"},null,-1)),t("div",Ft,[e[33]||(e[33]=t("h2",{class:"text-lg font-medium text-white mb-6"},"Orbit Configuration",-1)),Z.value?(o(),i("div",Ht,[n(s(se),{class:"w-4 h-4 inline animate-spin mr-2"}),e[26]||(e[26]=c(" Loading configuration... ",-1))])):(o(),i(k,{key:1},[t("div",Nt,[e[28]||(e[28]=t("div",null,[t("h3",{class:"text-sm font-medium text-white"},"Site Paths"),t("p",{class:"text-sm text-zinc-500 mt-1"}," Directories where your sites are located. ")],-1)),t("div",null,[t("div",jt,[(o(!0),i(k,null,V(C.value,(l,u)=>(o(),i("div",{key:u,class:"flex items-center gap-2"},[n(s(S),{modelValue:C.value[u],"onUpdate:modelValue":w=>C.value[u]=w,type:"text",placeholder:"/home/user/sites",class:"flex-1 font-mono"},null,8,["modelValue","onUpdate:modelValue"]),t("button",{onClick:w=>Ue(u),type:"button",class:"text-zinc-500 hover:text-red-400 p-2 transition-colors"},[n(s(le),{class:"w-4 h-4"})],8,Kt)]))),128))]),t("button",{onClick:Te,type:"button",class:"mt-2 text-sm text-zinc-400 hover:text-white transition-colors flex items-center gap-1"},[n(s(at),{class:"w-4 h-4"}),e[27]||(e[27]=c(" Add path ",-1))])])]),e[31]||(e[31]=t("hr",{class:"border-zinc-800"},null,-1)),t("div",Mt,[t("div",null,[e[29]||(e[29]=t("h3",{class:"text-sm font-medium text-white"},"TLD",-1)),t("p",Rt," Top-level domain for local sites. Sites will be accessible at sitename."+d(D.value||"test"),1)]),t("div",null,[n(s(S),{modelValue:D.value,"onUpdate:modelValue":e[5]||(e[5]=l=>D.value=l),type:"text",id:"config-tld",placeholder:"test",class:"w-full font-mono"},null,8,["modelValue"])])]),e[32]||(e[32]=t("hr",{class:"border-zinc-800"},null,-1)),t("div",It,[e[30]||(e[30]=t("div",null,[t("h3",{class:"text-sm font-medium text-white"},"Default PHP Version"),t("p",{class:"text-sm text-zinc-500 mt-1"},"PHP version used for new sites.")],-1)),t("div",null,[n(s(he),{modelValue:L.value,"onUpdate:modelValue":e[6]||(e[6]=l=>L.value=l)},{default:r(()=>[n(s(pe),{class:"w-full"},{default:r(()=>[n(s(fe),{placeholder:"Select PHP version"})]),_:1}),n(s(ye),null,{default:r(()=>[(o(!0),i(k,null,V(re.value,l=>(o(),_(s(xe),{key:l,value:l},{default:r(()=>[c(" PHP "+d(l),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])])]),t("div",Ot,[n(s(y),{onClick:Pe,type:"button",disabled:B.value,variant:"secondary"},{default:r(()=>[c(d(B.value?"Saving...":"Save Configuration"),1)]),_:1},8,["disabled"])])],64))]),e[63]||(e[63]=t("hr",{class:"border-zinc-800"},null,-1)),t("div",Bt,[n(mt,{"environment-id":h.environment.id},null,8,["environment-id"])]),e[64]||(e[64]=t("hr",{class:"border-zinc-800"},null,-1)),t("div",Lt,[e[39]||(e[39]=t("h2",{class:"text-lg font-medium text-white mb-6"},"External Access",-1)),t("div",qt,[e[38]||(e[38]=t("div",null,[t("h3",{class:"text-sm font-medium text-white"},"Enable External Access"),t("p",{class:"text-sm text-zinc-500 mt-1"}," Enable SSH links for accessing this environment from external machines. ")],-1)),t("div",Yt,[t("div",Xt,[n(s(P),{for:"external_access",class:"text-zinc-400"},{default:r(()=>[...e[34]||(e[34]=[c(" Enable external access ",-1)])]),_:1}),n(s(te),{id:"external_access",checked:s(T).external_access,"onUpdate:checked":e[7]||(e[7]=l=>s(T).external_access=l)},null,8,["checked"])]),s(T).external_access?(o(),i("div",Jt,[t("div",null,[n(s(P),{for:"external_host",class:"text-zinc-400 mb-1.5"},{default:r(()=>[...e[35]||(e[35]=[c(" External Host / IP ",-1)])]),_:1}),n(s(S),{modelValue:s(T).external_host,"onUpdate:modelValue":e[8]||(e[8]=l=>s(T).external_host=l),type:"text",id:"external_host",placeholder:"e.g. 192.168.1.100 or myserver.example.com",class:"w-full font-mono"},null,8,["modelValue"]),e[36]||(e[36]=t("p",{class:"mt-1 text-xs text-zinc-500"}," The hostname or IP address external users will use to connect via SSH. ",-1))]),n(s(y),{type:"button",onClick:ce,disabled:s(T).processing,variant:"outline",size:"sm"},{default:r(()=>[...e[37]||(e[37]=[c(" Save External Access ",-1)])]),_:1},8,["disabled"])])):m("",!0)])])]),e[65]||(e[65]=t("hr",{class:"border-zinc-800"},null,-1)),t("div",Wt,[e[43]||(e[43]=t("h2",{class:"text-lg font-medium text-white mb-6"},"Template Favorites",-1)),t("div",Gt,[e[42]||(e[42]=t("div",null,[t("h3",{class:"text-sm font-medium text-white"},"Site Templates"),t("p",{class:"text-sm text-zinc-500 mt-1"}," Manage your favorite site templates for quick project creation. ")],-1)),t("div",Zt,[h.templateFavorites.length===0?(o(),i("div",Qt,[n(s(pt),{class:"w-8 h-8 mx-auto mb-2 text-zinc-600"}),e[40]||(e[40]=t("p",{class:"text-sm"},"No template favorites yet.",-1))])):(o(),i("div",es,[(o(!0),i(k,null,V(h.templateFavorites,l=>(o(),i("div",{key:l.id,class:"flex items-center justify-between rounded-lg border border-zinc-700 bg-zinc-800/50 px-4 py-3"},[t("div",ts,[t("div",ss,[t("span",ls,d(l.display_name),1),l.usage_count>0?(o(),_(s(ge),{key:0,variant:"secondary"},{default:r(()=>[c(" Used "+d(l.usage_count)+"x ",1)]),_:2},1024)):m("",!0)]),t("p",ns,d(l.repo_url),1)]),t("div",os,[n(s(y),{type:"button",onClick:u=>We(l.repo_url),variant:"ghost",size:"icon-sm",title:"Open on GitHub"},{default:r(()=>[n(s(it),{class:"w-4 h-4"})]),_:1},8,["onClick"]),n(s(y),{type:"button",onClick:u=>Le(l),variant:"ghost",size:"icon-sm",title:"Edit"},{default:r(()=>[n(s(ke),{class:"w-4 h-4"})]),_:1},8,["onClick"]),n(s(y),{type:"button",onClick:u=>Ye(l),variant:"ghost",size:"icon-sm",class:"hover:text-red-400",title:"Delete"},{default:r(()=>[n(s(le),{class:"w-4 h-4"})]),_:1},8,["onClick"])])]))),128))])),n(s(y),{type:"button",onClick:Be,variant:"outline"},{default:r(()=>[...e[41]||(e[41]=[c(" Add Template ",-1)])]),_:1})])])]),e[66]||(e[66]=t("hr",{class:"border-zinc-800"},null,-1)),a.$page.props.multi_environment?(o(),i("div",as,[e[48]||(e[48]=t("h2",{class:"text-lg font-medium text-white mb-6"},"SSH Public Keys",-1)),t("div",is,[e[47]||(e[47]=t("div",null,[t("h3",{class:"text-sm font-medium text-white"},"Manage SSH Keys"),t("p",{class:"text-sm text-zinc-500 mt-1"}," SSH keys for environment provisioning. ")],-1)),t("div",rs,[h.sshKeys.length===0?(o(),i("div",ds,[n(s(ft),{class:"w-8 h-8 mx-auto mb-2 text-zinc-600"}),e[44]||(e[44]=t("p",{class:"text-sm"},"No SSH keys configured.",-1))])):(o(),i("div",us,[(o(!0),i(k,null,V(h.sshKeys,l=>(o(),i("div",{key:l.id,class:"flex items-center justify-between rounded-lg border border-zinc-700 bg-zinc-800/50 px-4 py-3"},[t("div",cs,[t("div",ms,[t("span",vs,d(l.name),1),l.is_default?(o(),_(s(ge),{key:0,class:"bg-lime-400/10 text-lime-300 border-lime-400/20"},{default:r(()=>[...e[45]||(e[45]=[c(" Default ",-1)])]),_:1})):m("",!0)]),t("p",ps,d(Oe(l.public_key,50)),1)]),t("div",fs,[n(s(y),{type:"button",onClick:u=>Re(l),variant:"ghost",size:"icon-sm",title:"Copy"},{default:r(()=>[n(s(ht),{class:"w-4 h-4"})]),_:1},8,["onClick"]),l.is_default?m("",!0):(o(),_(s(y),{key:0,type:"button",onClick:u=>Me(l),variant:"ghost",size:"icon-sm",class:"hover:text-lime-400",title:"Set default"},{default:r(()=>[n(s(yt),{class:"w-4 h-4"})]),_:1},8,["onClick"])),n(s(y),{type:"button",onClick:u=>Ne(l),variant:"ghost",size:"icon-sm",title:"Edit"},{default:r(()=>[n(s(ke),{class:"w-4 h-4"})]),_:1},8,["onClick"]),n(s(y),{type:"button",onClick:u=>Ke(l),variant:"ghost",size:"icon-sm",class:"hover:text-red-400",title:"Delete"},{default:r(()=>[n(s(le),{class:"w-4 h-4"})]),_:1},8,["onClick"])])]))),128))])),n(s(y),{type:"button",onClick:He,variant:"outline"},{default:r(()=>[...e[46]||(e[46]=[c(" Add SSH Key ",-1)])]),_:1})])])])):m("",!0),a.$page.props.multi_environment?(o(),i("hr",ys)):m("",!0),a.$page.props.multi_environment?(o(),i("div",xs,[e[51]||(e[51]=t("h2",{class:"text-lg font-medium text-white mb-6"},"Desktop Settings",-1)),t("div",hs,[e[49]||(e[49]=t("div",null,[t("h3",{class:"text-sm font-medium text-white"},"Desktop Notifications"),t("p",{class:"text-sm text-zinc-500 mt-1"}," Show system notifications for site events. ")],-1)),t("div",gs,[n(s(te),{checked:s(K).enabled,"onUpdate:checked":Ge,disabled:s(K).processing},null,8,["checked","disabled"])])]),t("div",bs,[e[50]||(e[50]=t("div",null,[t("h3",{class:"text-sm font-medium text-white"},"Menu Bar Icon"),t("p",{class:"text-sm text-zinc-500 mt-1"}," Show Orbit in the system menu bar for quick access. ")],-1)),t("div",ks,[n(s(te),{checked:s(M).enabled,"onUpdate:checked":Ze,disabled:s(M).processing},null,8,["checked","disabled"])])])])):m("",!0),a.$page.props.multi_environment?(o(),i("hr",_s)):m("",!0),t("div",ws,[t("div",Ss,[t("div",zs,[n(s(ne),{class:"w-5 h-5 text-zinc-400"}),e[52]||(e[52]=t("h2",{class:"text-lg font-medium text-white"},"Health Check",-1)),g.value?(o(),i("span",{key:0,class:me(["text-xs px-2 py-0.5 rounded-full",g.value.status==="healthy"?"bg-lime-500/10 text-lime-400":g.value.status==="degraded"?"bg-amber-500/10 text-amber-400":"bg-red-500/10 text-red-400"])},d(g.value.status==="healthy"?"All Passed":g.value.status==="degraded"?"Warnings":"Issues Found"),3)):m("",!0)]),n(s(y),{onClick:ue,disabled:F.value,variant:"outline"},{default:r(()=>[F.value?(o(),_(s(xt),{key:0,class:"w-4 h-4 animate-spin"})):(o(),_(s(ne),{key:1,class:"w-4 h-4"})),c(" "+d(F.value?"Running...":"Run Diagnostics"),1)]),_:1},8,["disabled"])]),E.value?(o(),i("div",Cs,[t("div",Vs,[n(s(_e),{class:"w-5 h-5"}),t("span",null,d(E.value),1)])])):m("",!0),g.value?(o(),i("div",$s,[t("div",Es,[t("span",Ts,d(g.value.summary.passed)+" passed",1),g.value.summary.warnings>0?(o(),i("span",Us,d(g.value.summary.warnings)+" warnings ",1)):m("",!0),g.value.summary.errors>0?(o(),i("span",Ps,d(g.value.summary.errors)+" errors ",1)):m("",!0)]),(o(!0),i(k,null,V(g.value.checks,(l,u)=>(o(),i("div",{key:u,class:"border border-zinc-700/50 rounded-lg overflow-hidden"},[t("button",{onClick:w=>Se(u),class:"w-full flex items-center justify-between p-3 bg-zinc-800/30 hover:bg-zinc-700/30 transition-colors text-left"},[t("div",As,[l.status==="ok"?(o(),_(s(gt),{key:0,class:"w-5 h-5 text-lime-400"})):l.status==="warning"?(o(),_(s(be),{key:1,class:"w-5 h-5 text-amber-400"})):(o(),_(s(_e),{key:2,class:"w-5 h-5 text-red-400"})),t("div",null,[t("span",Fs,d(we[u]||u),1),t("p",Hs,d(l.message),1)])]),t("div",Ns,[l.status==="error"&&l.details?.can_fix?(o(),_(s(y),{key:0,onClick:W(w=>ze(u),["stop"]),disabled:j.value.has(u),variant:"secondary",size:"sm"},{default:r(()=>[j.value.has(u)?(o(),_(s(se),{key:0,class:"w-3 h-3 animate-spin mr-1"})):m("",!0),c(" "+d(j.value.has(u)?"Fixing...":"Fix"),1)]),_:2},1032,["onClick","disabled"])):m("",!0),l.details&&Object.keys(l.details).length>0?(o(),_(s(rt),{key:1,class:me(["w-4 h-4 text-zinc-500 transition-transform",N.value.has(u)?"rotate-180":""])},null,8,["class"])):m("",!0)])],8,Ds),N.value.has(u)&&l.details&&Object.keys(l.details).filter(w=>w!=="can_fix").length>0?(o(),i("div",js,[t("dl",Ks,[(o(!0),i(k,null,V(l.details,(w,ee)=>dt((o(),i("div",{key:ee,class:"flex"},[t("dt",Ms,d(ee),1),t("dd",Rs,[Array.isArray(w)?(o(!0),i(k,{key:0},V(w,(Qe,et)=>(o(),i("span",{key:et,class:"block"},d(Qe),1))),128)):typeof w=="object"&&w!==null?(o(),i("pre",Is,d(JSON.stringify(w,null,2)),1)):(o(),i(k,{key:2},[c(d(w),1)],64))])])),[[ut,ee!=="can_fix"]])),128))])])):m("",!0)]))),128))])):!F.value&&!E.value?(o(),i("div",Os,[n(s(ne),{class:"w-12 h-12 mx-auto mb-3 opacity-50"}),e[53]||(e[53]=t("p",null,"Run diagnostics to check the health of this environment",-1))])):m("",!0)]),e[67]||(e[67]=t("hr",{class:"border-zinc-800"},null,-1)),a.$page.props.multi_environment?(o(),i("div",Bs,[e[61]||(e[61]=t("h2",{class:"text-lg font-medium text-red-400 mb-6"},"Danger Zone",-1)),t("div",Ls,[e[60]||(e[60]=t("div",null,[t("h3",{class:"text-sm font-medium text-white"},"Delete Environment"),t("p",{class:"text-sm text-zinc-500 mt-1"}," Permanently delete this environment. This action cannot be undone. ")],-1)),t("div",null,[Q.value?(o(),i("div",Ys,[t("div",Xs,[n(s(be),{class:"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5"}),t("div",null,[e[57]||(e[57]=t("p",{class:"text-sm text-red-300 font-medium"},"Are you sure?",-1)),t("p",Js,[e[55]||(e[55]=c(" Type ",-1)),t("strong",Ws,d(h.environment.name),1),e[56]||(e[56]=c(" to confirm. ",-1))])])]),n(s(S),{modelValue:A.value,"onUpdate:modelValue":e[9]||(e[9]=l=>A.value=l),type:"text",placeholder:"Type environment name",class:"w-full"},null,8,["modelValue"]),t("div",Gs,[n(s(y),{onClick:Fe,type:"button",disabled:A.value!==h.environment.name,variant:"destructive"},{default:r(()=>[...e[58]||(e[58]=[c(" Delete ",-1)])]),_:1},8,["disabled"]),n(s(y),{onClick:Ae,type:"button",variant:"ghost"},{default:r(()=>[...e[59]||(e[59]=[c(" Cancel ",-1)])]),_:1})])])):(o(),i("div",qs,[n(s(y),{onClick:De,type:"button",variant:"destructive"},{default:r(()=>[...e[54]||(e[54]=[c(" Delete Environment ",-1)])]),_:1})]))])])])):m("",!0)]),n(ve,{show:q.value,title:U.value?"Edit SSH Key":"Add SSH Key",onClose:Y},{default:r(()=>[t("form",{onSubmit:W(je,["prevent"])},[t("div",Zs,[t("div",null,[n(s(P),{for:"keyName",class:"text-zinc-400 mb-1.5"},{default:r(()=>[...e[68]||(e[68]=[c("Name",-1)])]),_:1}),n(s(S),{modelValue:s(b).name,"onUpdate:modelValue":e[10]||(e[10]=l=>s(b).name=l),type:"text",id:"keyName",required:"",placeholder:"e.g., MacBook Pro",class:"w-full"},null,8,["modelValue"])]),Object.keys(h.availableSshKeys).length>0&&!U.value?(o(),i("div",Qs,[n(s(P),{class:"text-zinc-400 mb-1.5"},{default:r(()=>[...e[69]||(e[69]=[c("Import from ~/.ssh/",-1)])]),_:1}),t("select",{onChange:Ie,class:"w-full"},[e[70]||(e[70]=t("option",{value:""},"Select a key to import...",-1)),(o(!0),i(k,null,V(h.availableSshKeys,(l,u)=>(o(),i("option",{key:u,value:l.content,"data-name":String(u).replace(".pub","")},d(u)+" ("+d(l.type)+") ",9,el))),128))],32)])):m("",!0),t("div",null,[n(s(P),{for:"keyPublicKey",class:"text-zinc-400 mb-1.5"},{default:r(()=>[...e[71]||(e[71]=[c("Public Key",-1)])]),_:1}),n(s(vt),{modelValue:s(b).public_key,"onUpdate:modelValue":e[11]||(e[11]=l=>s(b).public_key=l),id:"keyPublicKey",rows:"4",required:"",placeholder:"ssh-ed25519 AAAA...",class:"w-full font-mono text-sm"},null,8,["modelValue"])])]),t("div",tl,[n(s(y),{type:"button",onClick:Y,variant:"ghost"},{default:r(()=>[...e[72]||(e[72]=[c("Cancel",-1)])]),_:1}),n(s(y),{type:"submit",disabled:s(b).processing,variant:"secondary"},{default:r(()=>[...e[73]||(e[73]=[c(" Save ",-1)])]),_:1},8,["disabled"])])],32)]),_:1},8,["show","title"]),n(ve,{show:X.value,title:z.value?"Edit Template":"Add Template",onClose:J},{default:r(()=>[t("form",{onSubmit:W(qe,["prevent"])},[t("div",sl,[z.value?(o(),i("div",nl,[e[75]||(e[75]=t("span",{class:"font-medium"},"Repository:",-1)),c(" "+d(z.value.repo_url),1)])):(o(),i("div",ll,[n(s(P),{for:"templateRepoUrl",class:"text-zinc-400 mb-1.5"},{default:r(()=>[...e[74]||(e[74]=[c("Repository URL",-1)])]),_:1}),n(s(S),{modelValue:s(x).repo_url,"onUpdate:modelValue":e[12]||(e[12]=l=>s(x).repo_url=l),onBlur:Je,type:"text",id:"templateRepoUrl",required:"",placeholder:"owner/repo or https://github.com/owner/repo",class:"w-full"},null,8,["modelValue"])])),t("div",null,[n(s(P),{for:"templateDisplayName",class:"text-zinc-400 mb-1.5"},{default:r(()=>[...e[76]||(e[76]=[c("Display Name",-1)])]),_:1}),n(s(S),{modelValue:s(x).display_name,"onUpdate:modelValue":e[13]||(e[13]=l=>s(x).display_name=l),type:"text",id:"templateDisplayName",required:"",placeholder:"e.g., Laravel, Next.js Starter",class:"w-full"},null,8,["modelValue"])])]),t("div",ol,[n(s(y),{type:"button",onClick:J,variant:"ghost"},{default:r(()=>[...e[77]||(e[77]=[c(" Cancel ",-1)])]),_:1}),n(s(y),{type:"submit",disabled:s(x).processing,variant:"secondary"},{default:r(()=>[c(d(z.value?"Update":"Add"),1)]),_:1},8,["disabled"])])],32)]),_:1},8,["show","title"])],64))}});export{gl as default};
