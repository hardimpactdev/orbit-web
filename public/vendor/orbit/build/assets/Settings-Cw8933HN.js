import{d as de,j as S,k as ue,c as r,g as l,a as s,u as t,h as me,f as m,m as j,v as P,F as w,i as V,w as i,b as u,p as A,r as U,o as a,t as v,e as F,E as ce,q as M}from"./app-DrCT5KMu.js";import{_ as z}from"./Modal.vue_vue_type_script_setup_true_lang-BbQgKwbs.js";import{H as D,I as c,X as h,Y as H,V as pe,D as O}from"./craft-ui-o8I0d7KD.js";import{K as fe,F as ye,S as ve}from"./star-DwV2dH93.js";import{C as ge}from"./copy-CfhM_VMz.js";import{P as R}from"./pencil-BAvqvo34.js";import{T as q}from"./trash-2-BkMHF4RJ.js";const be={key:0,class:"grid gap-x-8 gap-y-6 sm:grid-cols-2"},xe=["value"],he={key:1,class:"my-10 border-t border-border"},ke={key:2,class:"grid gap-x-8 gap-y-6 sm:grid-cols-2"},_e=["value"],Se={key:3,class:"my-10 border-t border-border"},we={key:4,class:"grid gap-x-8 gap-y-6 sm:grid-cols-2"},Ce={class:"flex items-center"},Ke={key:5,class:"my-10 border-t border-border"},Ve={key:6,class:"grid gap-x-8 gap-y-6 sm:grid-cols-2"},$e={class:"flex items-center"},Ee={key:7,class:"my-10 border-t border-border"},Ne={key:8,class:"grid gap-x-8 gap-y-6 sm:grid-cols-2"},Te={class:"space-y-4"},Ue={key:0,class:"text-center py-6 text-muted-foreground"},He={key:1,class:"space-y-3"},Ae={class:"min-w-0 flex-1"},Fe={class:"flex items-center gap-2"},Me={class:"text-sm font-medium text-foreground"},De={class:"mt-0.5 truncate font-mono text-xs text-muted-foreground"},Be={class:"ml-4 flex items-center gap-1"},je={key:9,class:"grid gap-x-8 gap-y-6 sm:grid-cols-2"},Pe={class:"space-y-4"},ze={class:"flex items-center justify-between"},Oe={key:0,class:"space-y-3"},Re={key:10,class:"my-10 border-t border-border"},qe={class:"grid gap-x-8 gap-y-6 sm:grid-cols-2"},Ie={class:"space-y-4"},Le={key:0,class:"text-center py-6 text-muted-foreground"},Ye={key:1,class:"space-y-3"},Ge={class:"min-w-0 flex-1"},We={class:"flex items-center gap-2"},Xe={class:"text-sm font-medium text-foreground"},Je={class:"mt-0.5 font-mono text-xs text-muted-foreground"},Qe={class:"ml-4 flex items-center gap-1"},Ze={class:"flex justify-end gap-4"},et={class:"p-6 space-y-4"},tt={key:0},st=["value","data-name"],ot={class:"flex justify-end gap-4 px-6 py-4 border-t border-border"},lt={class:"p-6 space-y-4"},nt={key:0},at={key:1,class:"text-sm text-muted-foreground"},rt={class:"flex justify-end gap-4 px-6 py-4 border-t border-border"},yt=de({__name:"Settings",props:{editor:{},editorOptions:{},terminal:{},terminalOptions:{},sshKeys:{},availableSshKeys:{},templateFavorites:{},notificationsEnabled:{type:Boolean},menuBarEnabled:{type:Boolean},environment:{}},setup(y){const k=y,_=S({editor:k.editor.scheme,terminal:k.terminal}),I=()=>{_.post("/settings")},$=U(!1),x=U(null),f=S({name:"",public_key:""}),L=()=>{x.value=null,f.reset(),$.value=!0},Y=n=>{x.value=n,f.name=n.name,f.public_key=n.public_key,$.value=!0},E=()=>{$.value=!1,x.value=null,f.reset()},G=()=>{x.value?f.put(`/ssh-keys/${x.value.id}`,{onSuccess:E}):f.post("/ssh-keys",{onSuccess:E})},W=n=>{confirm("Delete this SSH key?")&&M.delete(`/ssh-keys/${n.id}`)},X=n=>{M.post(`/ssh-keys/${n.id}/default`)},J=async n=>{await navigator.clipboard.writeText(n.public_key)},Q=n=>{const o=n.target.selectedOptions[0];if(o.value){f.public_key=o.value;const d=o.dataset.name;d&&!f.name&&(f.name=d)}},Z=(n,e=80)=>n.length>e?n.substring(0,e)+"...":n,N=U(!1),g=U(null),p=S({repo_url:"",display_name:""}),ee=()=>{g.value=null,p.reset(),N.value=!0},te=n=>{g.value=n,p.repo_url=n.repo_url,p.display_name=n.display_name,N.value=!0},T=()=>{N.value=!1,g.value=null,p.reset()},se=()=>{g.value?p.put(`/template-favorites/${g.value.id}`,{onSuccess:T}):p.post("/template-favorites",{onSuccess:T})},oe=n=>{confirm("Delete this template?")&&M.delete(`/template-favorites/${n.id}`)},le=n=>{const e=n.match(/(?:github\.com\/)?([^/]+)\/([^/]+)/);return e?e[2]:n},ne=()=>{!g.value&&p.repo_url&&!p.display_name&&(p.display_name=le(p.repo_url))},ae=n=>{const e=n.startsWith("http")?n:`https://github.com/${n}`;window.open(e,"_blank")},C=S({enabled:k.notificationsEnabled}),re=()=>{C.enabled=!C.enabled,C.post("/settings/notifications")},K=S({enabled:k.menuBarEnabled}),ie=()=>{K.enabled=!K.enabled,K.post("/settings/menu-bar")},b=S({external_access:k.environment?.external_access??!1,external_host:k.environment?.external_host??""}),B=()=>{b.post("/settings/external-access")};return ue(()=>b.external_access,(n,e)=>{e===!0&&n===!1&&B()}),(n,e)=>(a(),r(w,null,[l(t(me),{title:"Settings"}),s("form",{onSubmit:A(I,["prevent"]),class:"mx-auto max-w-4xl"},[e[26]||(e[26]=s("h1",{class:"text-2xl font-semibold text-white sm:text-xl"},"Settings",-1)),e[27]||(e[27]=s("hr",{class:"mt-6 mb-10 border-t border-white/10"},null,-1)),n.$page.props.multi_environment?(a(),r("section",be,[e[8]||(e[8]=s("div",{class:"space-y-1"},[s("h2",{class:"text-sm font-semibold text-foreground"},"Code Editor"),s("p",{class:"text-sm text-muted-foreground"}," Select your preferred editor for opening remote sites. ")],-1)),s("div",null,[j(s("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>t(_).editor=o),class:"w-full"},[(a(!0),r(w,null,V(y.editorOptions,(o,d)=>(a(),r("option",{key:d,value:d},v(o),9,xe))),128))],512),[[P,t(_).editor]])])])):m("",!0),n.$page.props.multi_environment?(a(),r("hr",he)):m("",!0),n.$page.props.multi_environment?(a(),r("section",ke,[e[9]||(e[9]=s("div",{class:"space-y-1"},[s("h2",{class:"text-sm font-semibold text-foreground"},"Terminal"),s("p",{class:"text-sm text-muted-foreground"}," Select your preferred terminal for SSH connections. ")],-1)),s("div",null,[j(s("select",{"onUpdate:modelValue":e[1]||(e[1]=o=>t(_).terminal=o),class:"w-full"},[(a(!0),r(w,null,V(y.terminalOptions,(o,d)=>(a(),r("option",{key:d,value:d},v(o),9,_e))),128))],512),[[P,t(_).terminal]])])])):m("",!0),n.$page.props.multi_environment?(a(),r("hr",Se)):m("",!0),n.$page.props.multi_environment?(a(),r("section",we,[e[10]||(e[10]=s("div",{class:"space-y-1"},[s("h2",{class:"text-sm font-semibold text-foreground"},"Desktop Notifications"),s("p",{class:"text-sm text-muted-foreground"},"Show system notifications for site events.")],-1)),s("div",Ce,[l(t(D),{checked:t(C).enabled,"onUpdate:checked":re,disabled:t(C).processing},null,8,["checked","disabled"])])])):m("",!0),n.$page.props.multi_environment?(a(),r("hr",Ke)):m("",!0),n.$page.props.multi_environment?(a(),r("section",Ve,[e[11]||(e[11]=s("div",{class:"space-y-1"},[s("h2",{class:"text-sm font-semibold text-foreground"},"Menu Bar Icon"),s("p",{class:"text-sm text-muted-foreground"}," Show Orbit in the system menu bar for quick access. ")],-1)),s("div",$e,[l(t(D),{checked:t(K).enabled,"onUpdate:checked":ie,disabled:t(K).processing},null,8,["checked","disabled"])])])):m("",!0),n.$page.props.multi_environment?(a(),r("hr",Ee)):m("",!0),n.$page.props.multi_environment?(a(),r("section",Ne,[e[15]||(e[15]=s("div",{class:"space-y-1"},[s("h2",{class:"text-sm font-semibold text-foreground"},"SSH Public Keys"),s("p",{class:"text-sm text-muted-foreground"},"Manage SSH keys for environment provisioning.")],-1)),s("div",Te,[y.sshKeys.length===0?(a(),r("div",Ue,[l(t(fe),{class:"w-8 h-8 mx-auto mb-2 text-muted-foreground"}),e[12]||(e[12]=s("p",{class:"text-sm"},"No SSH keys configured.",-1))])):(a(),r("div",He,[(a(!0),r(w,null,V(y.sshKeys,o=>(a(),r("div",{key:o.id,class:"flex items-center justify-between rounded-lg border border-border bg-card px-4 py-3"},[s("div",Ae,[s("div",Fe,[s("span",Me,v(o.name),1),o.is_default?(a(),F(t(O),{key:0,class:"bg-lime-400/10 text-lime-300 border-lime-400/20"},{default:i(()=>[...e[13]||(e[13]=[u("Default",-1)])]),_:1})):m("",!0)]),s("p",De,v(Z(o.public_key,50)),1)]),s("div",Be,[l(t(c),{type:"button",onClick:d=>J(o),variant:"ghost",size:"icon-sm",title:"Copy"},{default:i(()=>[l(t(ge),{class:"w-4 h-4"})]),_:1},8,["onClick"]),o.is_default?m("",!0):(a(),F(t(c),{key:0,type:"button",onClick:d=>X(o),variant:"ghost",size:"icon-sm",class:"hover:text-lime-400",title:"Set default"},{default:i(()=>[l(t(ve),{class:"w-4 h-4"})]),_:1},8,["onClick"])),l(t(c),{type:"button",onClick:d=>Y(o),variant:"ghost",size:"icon-sm",title:"Edit"},{default:i(()=>[l(t(R),{class:"w-4 h-4"})]),_:1},8,["onClick"]),l(t(c),{type:"button",onClick:d=>W(o),variant:"ghost",size:"icon-sm",class:"hover:text-red-400",title:"Delete"},{default:i(()=>[l(t(q),{class:"w-4 h-4"})]),_:1},8,["onClick"])])]))),128))])),l(t(c),{type:"button",onClick:L,variant:"outline"},{default:i(()=>[...e[14]||(e[14]=[u(" Add SSH Key ",-1)])]),_:1})])])):m("",!0),e[28]||(e[28]=s("hr",{class:"my-10 border-t border-white/5"},null,-1)),y.environment?(a(),r("section",je,[e[20]||(e[20]=s("div",{class:"space-y-1"},[s("h2",{class:"text-sm font-semibold text-foreground"},"External Access"),s("p",{class:"text-sm text-muted-foreground"}," Enable SSH links for accessing this environment from external machines. ")],-1)),s("div",Pe,[s("div",ze,[l(t(h),{for:"external_access",class:"text-muted-foreground"},{default:i(()=>[...e[16]||(e[16]=[u(" Enable external access ",-1)])]),_:1}),l(t(D),{id:"external_access",checked:t(b).external_access,"onUpdate:checked":e[2]||(e[2]=o=>t(b).external_access=o)},null,8,["checked"])]),t(b).external_access?(a(),r("div",Oe,[s("div",null,[l(t(h),{for:"external_host",class:"text-muted-foreground mb-1.5"},{default:i(()=>[...e[17]||(e[17]=[u(" External Host / IP ",-1)])]),_:1}),l(t(H),{modelValue:t(b).external_host,"onUpdate:modelValue":e[3]||(e[3]=o=>t(b).external_host=o),type:"text",id:"external_host",placeholder:"e.g. 192.168.1.100 or myserver.example.com",class:"w-full"},null,8,["modelValue"]),e[18]||(e[18]=s("p",{class:"mt-1 text-xs text-muted-foreground"}," The hostname or IP address external users will use to connect via SSH. ",-1))]),l(t(c),{type:"button",onClick:B,disabled:t(b).processing,variant:"outline",size:"sm"},{default:i(()=>[...e[19]||(e[19]=[u(" Save External Access ",-1)])]),_:1},8,["disabled"])])):m("",!0)])])):m("",!0),y.environment?(a(),r("hr",Re)):m("",!0),s("section",qe,[e[23]||(e[23]=s("div",{class:"space-y-1"},[s("h2",{class:"text-sm font-semibold text-foreground"},"Template Favorites"),s("p",{class:"text-sm text-muted-foreground"},"Manage your favorite site templates.")],-1)),s("div",Ie,[y.templateFavorites.length===0?(a(),r("div",Le,[l(t(ye),{class:"w-8 h-8 mx-auto mb-2 text-muted-foreground"}),e[21]||(e[21]=s("p",{class:"text-sm"},"No template favorites yet.",-1))])):(a(),r("div",Ye,[(a(!0),r(w,null,V(y.templateFavorites,o=>(a(),r("div",{key:o.id,class:"flex items-center justify-between rounded-lg border border-border bg-card px-4 py-3"},[s("div",Ge,[s("div",We,[s("span",Xe,v(o.display_name),1),o.usage_count>0?(a(),F(t(O),{key:0,variant:"secondary"},{default:i(()=>[u("Used "+v(o.usage_count)+"x",1)]),_:2},1024)):m("",!0)]),s("p",Je,v(o.repo_url),1)]),s("div",Qe,[l(t(c),{type:"button",onClick:d=>ae(o.repo_url),variant:"ghost",size:"icon-sm",title:"Open on GitHub"},{default:i(()=>[l(t(ce),{class:"w-4 h-4"})]),_:1},8,["onClick"]),l(t(c),{type:"button",onClick:d=>te(o),variant:"ghost",size:"icon-sm",title:"Edit"},{default:i(()=>[l(t(R),{class:"w-4 h-4"})]),_:1},8,["onClick"]),l(t(c),{type:"button",onClick:d=>oe(o),variant:"ghost",size:"icon-sm",class:"hover:text-red-400",title:"Delete"},{default:i(()=>[l(t(q),{class:"w-4 h-4"})]),_:1},8,["onClick"])])]))),128))])),l(t(c),{type:"button",onClick:ee,variant:"outline"},{default:i(()=>[...e[22]||(e[22]=[u(" Add Template ",-1)])]),_:1})])]),e[29]||(e[29]=s("hr",{class:"my-10 border-t border-border"},null,-1)),s("div",Ze,[l(t(c),{type:"reset",variant:"ghost"},{default:i(()=>[...e[24]||(e[24]=[u("Reset",-1)])]),_:1}),l(t(c),{type:"submit",disabled:t(_).processing,variant:"secondary"},{default:i(()=>[...e[25]||(e[25]=[u(" Save changes ",-1)])]),_:1},8,["disabled"])])],32),l(z,{show:$.value,title:x.value?"Edit SSH Key":"Add SSH Key",onClose:E},{default:i(()=>[s("form",{onSubmit:A(G,["prevent"])},[s("div",et,[s("div",null,[l(t(h),{for:"keyName",class:"text-muted-foreground mb-1.5"},{default:i(()=>[...e[30]||(e[30]=[u("Name",-1)])]),_:1}),l(t(H),{modelValue:t(f).name,"onUpdate:modelValue":e[4]||(e[4]=o=>t(f).name=o),type:"text",id:"keyName",required:"",placeholder:"e.g., MacBook Pro",class:"w-full"},null,8,["modelValue"])]),Object.keys(y.availableSshKeys).length>0&&!x.value?(a(),r("div",tt,[l(t(h),{class:"text-muted-foreground mb-1.5"},{default:i(()=>[...e[31]||(e[31]=[u("Import from ~/.ssh/",-1)])]),_:1}),s("select",{onChange:Q,class:"w-full"},[e[32]||(e[32]=s("option",{value:""},"Select a key to import...",-1)),(a(!0),r(w,null,V(y.availableSshKeys,(o,d)=>(a(),r("option",{key:d,value:o.content,"data-name":String(d).replace(".pub","")},v(d)+" ("+v(o.type)+") ",9,st))),128))],32)])):m("",!0),s("div",null,[l(t(h),{for:"keyPublicKey",class:"text-muted-foreground mb-1.5"},{default:i(()=>[...e[33]||(e[33]=[u("Public Key",-1)])]),_:1}),l(t(pe),{modelValue:t(f).public_key,"onUpdate:modelValue":e[5]||(e[5]=o=>t(f).public_key=o),id:"keyPublicKey",rows:"4",required:"",placeholder:"ssh-ed25519 AAAA...",class:"w-full font-mono text-sm"},null,8,["modelValue"])])]),s("div",ot,[l(t(c),{type:"button",onClick:E,variant:"ghost"},{default:i(()=>[...e[34]||(e[34]=[u("Cancel",-1)])]),_:1}),l(t(c),{type:"submit",disabled:t(f).processing,variant:"secondary"},{default:i(()=>[...e[35]||(e[35]=[u(" Save ",-1)])]),_:1},8,["disabled"])])],32)]),_:1},8,["show","title"]),l(z,{show:N.value,title:g.value?"Edit Template":"Add Template",onClose:T},{default:i(()=>[s("form",{onSubmit:A(se,["prevent"])},[s("div",lt,[g.value?(a(),r("div",at,[e[37]||(e[37]=s("span",{class:"font-medium"},"Repository:",-1)),u(" "+v(g.value.repo_url),1)])):(a(),r("div",nt,[l(t(h),{for:"templateRepoUrl",class:"text-muted-foreground mb-1.5"},{default:i(()=>[...e[36]||(e[36]=[u("Repository URL",-1)])]),_:1}),l(t(H),{modelValue:t(p).repo_url,"onUpdate:modelValue":e[6]||(e[6]=o=>t(p).repo_url=o),onBlur:ne,type:"text",id:"templateRepoUrl",required:"",placeholder:"owner/repo or https://github.com/owner/repo",class:"w-full"},null,8,["modelValue"])])),s("div",null,[l(t(h),{for:"templateDisplayName",class:"text-muted-foreground mb-1.5"},{default:i(()=>[...e[38]||(e[38]=[u("Display Name",-1)])]),_:1}),l(t(H),{modelValue:t(p).display_name,"onUpdate:modelValue":e[7]||(e[7]=o=>t(p).display_name=o),type:"text",id:"templateDisplayName",required:"",placeholder:"e.g., Laravel, Next.js Starter",class:"w-full"},null,8,["modelValue"])])]),s("div",rt,[l(t(c),{type:"button",onClick:T,variant:"ghost"},{default:i(()=>[...e[39]||(e[39]=[u(" Cancel ",-1)])]),_:1}),l(t(c),{type:"submit",disabled:t(p).processing,variant:"secondary"},{default:i(()=>[u(v(g.value?"Update":"Add"),1)]),_:1},8,["disabled"])])],32)]),_:1},8,["show","title"])],64))}});export{yt as default};
