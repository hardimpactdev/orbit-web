import{c as xe,d as ft,k as H,z as xt,x as yt,m as ht,a,h as l,b as t,u as s,i as gt,g as m,t as d,q as te,e as c,F as h,f as _,r as v,w as r,o,j as V,P as bt,n as Ce,W as kt,G as se,s as ne,E as wt,X as _t,p as zt,B as Ct}from"./app-BFwnnsQQ.js";import{_ as St}from"./Heading.vue_vue_type_script_setup_true_lang-B-Quw1YS.js";import{_ as Vt}from"./DnsSettings.vue_vue_type_script_setup_true_lang-CGEyQ8ID.js";import{_ as ce}from"./Modal.vue_vue_type_script_setup_true_lang-CEoGP5sD.js";import{Y as C,e as Se,f as Ve,g as $e,B as De,$ as Pe,I as x,X as T,H as me,V as $t,D as Ee}from"./craft-ui--bolM2Kt.js";import{L as le}from"./loader-circle-CvdEy-Ot.js";import{F as Dt,K as Pt,S as Et}from"./star-CGyx14WY.js";import{R as Tt}from"./refresh-cw-DXwLVXa0.js";import{T as Te}from"./triangle-alert-PJn_XTiP.js";import{F as ve}from"./folder-open-BdJ7mJMO.js";import{C as Ut}from"./circle-alert-D2pHpDg3.js";import{T as pe}from"./trash-2-BdHLwMos.js";import{P as Ue}from"./pencil-jjjFFFnM.js";import{C as Ft}from"./copy-CDfTOwhm.js";const At=xe("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const Fe=xe("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);const fe=xe("stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]),Ht={class:"mb-8"},Nt={class:"text-zinc-400 mt-1"},jt={class:"grid grid-cols-2 gap-8 py-6"},Kt={class:"text-sm text-zinc-500 mt-1"},Mt={class:"relative"},Rt={key:0,class:"mt-2 text-sm text-red-400"},Bt={key:1,class:"mt-2 text-sm text-amber-400"},It={class:"grid grid-cols-2 gap-8 py-6"},Ot={class:"grid grid-cols-2 gap-8 py-6"},Lt={class:"space-y-4"},qt={key:0,class:"mt-1 text-sm text-red-400"},Yt={class:"grid grid-cols-2 gap-4"},Xt={key:0,class:"mt-1 text-sm text-red-400"},Wt={key:0,class:"mt-1 text-sm text-red-400"},Gt={class:"flex justify-end py-6"},Jt={class:"py-6"},Zt={key:0,class:"text-zinc-500 text-sm"},Qt={class:"grid grid-cols-2 gap-8 py-6"},es={class:"space-y-2"},ts=["onClick"],ss=["onClick"],ns={class:"grid grid-cols-2 gap-8 py-6"},ls={class:"text-sm text-zinc-500 mt-1"},os={class:"grid grid-cols-2 gap-8 py-6"},is={class:"flex justify-end py-6"},as={class:"py-6"},rs={class:"py-6"},ds={class:"grid grid-cols-2 gap-8"},us={class:"space-y-4"},cs={class:"flex items-center justify-between"},ms={key:0,class:"space-y-3"},vs={class:"py-6"},ps={class:"grid grid-cols-2 gap-8"},fs={class:"space-y-4"},xs={key:0,class:"text-center py-6 text-zinc-500"},ys={key:1,class:"space-y-3"},hs={class:"min-w-0 flex-1"},gs={class:"flex items-center gap-2"},bs={class:"text-sm font-medium text-white"},ks={class:"mt-0.5 font-mono text-xs text-zinc-500"},ws={class:"ml-4 flex items-center gap-1"},_s={key:0,class:"py-6"},zs={class:"grid grid-cols-2 gap-8"},Cs={class:"space-y-4"},Ss={key:0,class:"text-center py-6 text-zinc-500"},Vs={key:1,class:"space-y-3"},$s={class:"min-w-0 flex-1"},Ds={class:"flex items-center gap-2"},Ps={class:"text-sm font-medium text-white"},Es={class:"mt-0.5 truncate font-mono text-xs text-zinc-500"},Ts={class:"ml-4 flex items-center gap-1"},Us={key:1,class:"border-zinc-800"},Fs={key:2,class:"py-6"},As={class:"grid grid-cols-2 gap-8 mb-6"},Hs={class:"flex items-center"},Ns={class:"grid grid-cols-2 gap-8"},js={class:"flex items-center"},Ks={key:3,class:"border-zinc-800"},Ms={class:"py-6"},Rs={class:"flex items-center justify-between mb-6"},Bs={class:"flex items-center gap-2"},Is={key:0,class:"p-4 bg-red-900/20 border border-red-800 rounded-lg mb-4"},Os={class:"flex items-center gap-2 text-red-400"},Ls={key:1,class:"space-y-2"},qs={class:"flex items-center gap-4 mb-4 text-sm"},Ys={class:"text-lime-400"},Xs={key:0,class:"text-amber-400"},Ws={key:1,class:"text-red-400"},Gs=["onClick"],Js={class:"flex items-center gap-3"},Zs={class:"text-white font-medium"},Qs={class:"text-sm text-zinc-400 mt-0.5"},en={class:"flex items-center gap-2"},tn={key:0,class:"px-4 py-3 bg-zinc-900/50 border-t border-zinc-700/50"},sn={class:"space-y-2 text-sm"},nn={class:"text-zinc-500 w-32 flex-shrink-0"},ln={class:"text-zinc-300 font-mono break-all"},on={key:1,class:"text-xs"},an={key:2,class:"text-center py-8 text-zinc-500"},rn={key:4,class:"py-6"},dn={class:"grid grid-cols-2 gap-8"},un={key:0},cn={key:1,class:"space-y-4"},mn={class:"flex items-start gap-3 p-3 bg-red-900/20 rounded-lg"},vn={class:"text-sm text-red-400/80"},pn={class:"text-red-300"},fn={class:"flex gap-3"},xn={class:"p-6 space-y-4"},yn={key:0},hn=["value","data-name"],gn={class:"flex justify-end gap-4 px-6 py-4 border-t border-zinc-800"},bn={class:"p-6 space-y-4"},kn={key:0},wn={key:1,class:"text-sm text-zinc-400"},_n={class:"flex justify-end gap-4 px-6 py-4 border-t border-zinc-800"},zn={class:"p-6"},Cn={class:"flex items-center gap-2 mb-4 p-3 bg-zinc-800/50 rounded-lg"},Sn={class:"font-mono text-sm text-white truncate"},Vn={key:0,class:"text-center py-8"},$n={key:1,class:"text-center py-8"},Dn={class:"mt-2 text-sm text-red-400"},Pn={key:2,class:"space-y-1 max-h-80 overflow-y-auto"},En=["onClick"],Tn={class:"text-sm text-zinc-300 group-hover:text-white truncate"},Un={key:1,class:"text-center py-8 text-zinc-500"},Fn={class:"flex justify-end gap-4 px-6 py-4 border-t border-zinc-800"},Wn=ft({__name:"Settings",props:{environment:{},remoteApiUrl:{},editor:{},editorOptions:{},sshKeys:{},availableSshKeys:{},templateFavorites:{},notificationsEnabled:{type:Boolean},menuBarEnabled:{type:Boolean}},setup(g){const p=g,ye=document.querySelector('meta[name="csrf-token"]')?.content||"",I=yt(()=>!p.environment.is_local&&p.remoteApiUrl),f=H({name:p.environment.name,host:p.environment.host,user:p.environment.user,port:p.environment.port,editor_scheme:p.editor.scheme}),O=v(!1),$=v(null),L=v(!1),he=v(null),oe=v(!0),q=v(!1),z=v([]),U=v(""),Y=v("8.4"),ge=v(["8.3","8.4","8.5"]),ie=v(!1),F=v(""),be=v("test"),A=v(!1),b=v(null),D=v(null),N=v(new Set),Ae={ssh:"SSH Connection",cli:"CLI Installation",docker:"Docker Services",api:"API Connectivity",environment_dns:"Environment DNS",local_dns:"Local DNS",config:"Configuration"};function He(i){N.value.has(i)?N.value.delete(i):N.value.add(i)}const j=v(new Set);async function ke(){A.value=!0,D.value=null,b.value=null;try{const e=await(await fetch(`/environments/${p.environment.id}/doctor`)).json();e.success?b.value=e:D.value=e.error||"Health check failed"}catch{D.value="Failed to run health check"}finally{A.value=!1}}async function Ne(i){j.value.add(i);try{const n=await(await fetch(`/environments/${p.environment.id}/doctor/fix/${i}`,{method:"POST",headers:{"X-CSRF-TOKEN":ye,"Content-Type":"application/json"}})).json();n.success?await ke():D.value=n.message||"Failed to fix issue"}catch{D.value="Failed to fix issue"}finally{j.value.delete(i)}}async function je(){if(!(!I.value||!p.remoteApiUrl)){O.value=!0,$.value=null;try{const e=await(await fetch(`${p.remoteApiUrl}/instance-info`)).json();e.success&&e.data?f.name=e.data.name:$.value=e.error||"Failed to load instance info"}catch{$.value="Failed to connect to remote environment"}finally{O.value=!1}}}async function Ke(){if(p.remoteApiUrl){L.value=!0,$.value=null;try{const e=await(await fetch(`${p.remoteApiUrl}/instance-info`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:f.name})})).json();e.success||($.value=e.error||"Failed to update name")}catch{$.value="Failed to connect to remote environment"}finally{L.value=!1}}}async function Me(){oe.value=!0;try{const e=await(await fetch(`/api/environments/${p.environment.id}/config`)).json();e.success&&(he.value=e.data,z.value=[...e.data.paths||[]],z.value.length===0&&z.value.push(""),U.value=e.data.tld||"test",Y.value=e.data.default_php_version||"8.4",be.value=e.data.tld||"test",e.data.available_php_versions?.length&&(ge.value=e.data.available_php_versions))}catch(i){console.error("Failed to load config:",i)}finally{oe.value=!1}}async function Re(){I.value&&await Ke(),f.post(`/environments/${p.environment.id}/settings`)}function Be(){z.value.push("")}function Ie(i){z.value.splice(i,1)}const ae=v(!1),X=v(null),K=v("~"),re=v([]),W=v(null),G=v(!1),M=v(null);async function Oe(i){X.value=i,K.value=z.value[i]||"~",ae.value=!0,await we(K.value)}async function we(i){G.value=!0,M.value=null;try{const n=await(await fetch(`/environments/${p.environment.id}/browse-directories?path=${encodeURIComponent(i)}`)).json();n.success?(K.value=n.data.current,re.value=n.data.directories,W.value=n.data.parent):M.value=n.error||"Failed to load directories"}catch{M.value="Failed to load directories"}finally{G.value=!1}}function _e(i){we(i)}function Le(){X.value!==null&&(z.value[X.value]=K.value),de()}function de(){ae.value=!1,X.value=null}async function qe(){const i=z.value.filter(e=>e.trim()!=="");if(i.length===0){se.error("Please add at least one site path");return}q.value=!0;try{const n=await(await fetch(`/environments/${p.environment.id}/config`,{method:"POST",headers:{"X-CSRF-TOKEN":ye,"Content-Type":"application/json"},body:JSON.stringify({paths:i,tld:U.value.trim()||"test",default_php_version:Y.value})})).json();n.success?(he.value=n.data,be.value=U.value.trim()||"test",se.success("Configuration saved")):se.error("Failed to save config",{description:n.error||"Unknown error"})}catch{se.error("Failed to save config")}finally{q.value=!1}}function Ye(){ie.value=!0,F.value=""}function Xe(){ie.value=!1,F.value=""}function We(){F.value===p.environment.name&&ne.delete(`/environments/${p.environment.id}`,{onSuccess:()=>{}})}xt(()=>{Me(),I.value&&je()});const P=H({external_access:p.environment.external_access??!1,external_host:p.environment.external_host??""}),ze=()=>{P.post(`/environments/${p.environment.id}/settings/external-access`)};ht(()=>P.external_access,(i,e)=>{e===!0&&i===!1&&ze()});const J=v(!1),E=v(null),k=H({name:"",public_key:""}),Ge=()=>{E.value=null,k.reset(),J.value=!0},Je=i=>{E.value=i,k.name=i.name,k.public_key=i.public_key,J.value=!0},Z=()=>{J.value=!1,E.value=null,k.reset()},Ze=()=>{E.value?k.put(`/ssh-keys/${E.value.id}`,{onSuccess:Z}):k.post("/ssh-keys",{onSuccess:Z})},Qe=i=>{confirm("Delete this SSH key?")&&ne.delete(`/ssh-keys/${i.id}`)},et=i=>{ne.post(`/ssh-keys/${i.id}/default`)},tt=async i=>{await navigator.clipboard.writeText(i.public_key)},st=i=>{const n=i.target.selectedOptions[0];if(n.value){k.public_key=n.value;const u=n.dataset.name;u&&!k.name&&(k.name=u)}},nt=(i,e=80)=>i.length>e?i.substring(0,e)+"...":i,Q=v(!1),S=v(null),y=H({repo_url:"",display_name:""}),lt=()=>{S.value=null,y.reset(),Q.value=!0},ot=i=>{S.value=i,y.repo_url=i.repo_url,y.display_name=i.display_name,Q.value=!0},ee=()=>{Q.value=!1,S.value=null,y.reset()},it=()=>{S.value?y.put(`/template-favorites/${S.value.id}`,{onSuccess:ee}):y.post("/template-favorites",{onSuccess:ee})},at=i=>{confirm("Delete this template?")&&ne.delete(`/template-favorites/${i.id}`)},rt=i=>{const e=i.match(/(?:github\.com\/)?([^/]+)\/([^/]+)/);return e?e[2]:i},dt=()=>{!S.value&&y.repo_url&&!y.display_name&&(y.display_name=rt(y.repo_url))},ut=i=>{const e=i.startsWith("http")?i:`https://github.com/${i}`;window.open(e,"_blank")},R=H({enabled:p.notificationsEnabled}),ct=()=>{R.enabled=!R.enabled,R.post("/settings/notifications")},B=H({enabled:p.menuBarEnabled}),mt=()=>{B.enabled=!B.enabled,B.post("/settings/menu-bar")};return(i,e)=>(o(),a(h,null,[l(s(gt),{title:`Settings - ${g.environment.name}`},null,8,["title"]),t("div",null,[t("div",Ht,[l(St,{title:"Settings"}),t("p",Nt,"Configure "+d(g.environment.name),1)]),t("form",{onSubmit:te(Re,["prevent"])},[t("div",jt,[t("div",null,[e[18]||(e[18]=t("h3",{class:"text-sm font-medium text-white"},"Environment Name",-1)),t("p",Kt,[e[17]||(e[17]=c(" Display name for this environment. ",-1)),I.value?(o(),a(h,{key:0},[e[15]||(e[15]=t("br",null,null,-1)),e[16]||(e[16]=t("span",{class:"text-xs text-zinc-600"},"Changes will be synced to the remote environment.",-1))],64)):m("",!0)])]),t("div",null,[t("div",Mt,[l(s(C),{modelValue:s(f).name,"onUpdate:modelValue":e[0]||(e[0]=n=>s(f).name=n),type:"text",id:"name",class:"w-full",disabled:O.value},null,8,["modelValue","disabled"]),O.value?(o(),_(s(le),{key:0,class:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 animate-spin text-zinc-500"})):m("",!0)]),s(f).errors.name?(o(),a("p",Rt,d(s(f).errors.name),1)):m("",!0),$.value?(o(),a("p",Bt,d($.value),1)):m("",!0)])]),e[25]||(e[25]=t("hr",{class:"border-zinc-800"},null,-1)),t("div",It,[e[19]||(e[19]=t("div",null,[t("h3",{class:"text-sm font-medium text-white"},"Code Editor"),t("p",{class:"text-sm text-zinc-500 mt-1"}," Select your preferred editor for opening files in this environment. ")],-1)),t("div",null,[l(s(Pe),{modelValue:s(f).editor_scheme,"onUpdate:modelValue":e[1]||(e[1]=n=>s(f).editor_scheme=n)},{default:r(()=>[l(s(Se),{class:"w-full"},{default:r(()=>[l(s(Ve),{placeholder:"Select editor"})]),_:1}),l(s($e),null,{default:r(()=>[(o(!0),a(h,null,V(g.editorOptions,(n,u)=>(o(),_(s(De),{key:u,value:u},{default:r(()=>[c(d(n),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])])]),e[26]||(e[26]=t("hr",{class:"border-zinc-800"},null,-1)),g.environment.is_local?m("",!0):(o(),a(h,{key:0},[t("div",Ot,[e[23]||(e[23]=t("div",null,[t("h3",{class:"text-sm font-medium text-white"},"SSH Connection"),t("p",{class:"text-sm text-zinc-500 mt-1"}," Host, user, and port for SSH access. ")],-1)),t("div",Lt,[t("div",null,[e[20]||(e[20]=t("label",{for:"host",class:"block text-sm font-medium text-zinc-400 mb-1"},"Host",-1)),l(s(C),{modelValue:s(f).host,"onUpdate:modelValue":e[2]||(e[2]=n=>s(f).host=n),type:"text",id:"host",class:"w-full font-mono"},null,8,["modelValue"]),s(f).errors.host?(o(),a("p",qt,d(s(f).errors.host),1)):m("",!0)]),t("div",Yt,[t("div",null,[e[21]||(e[21]=t("label",{for:"user",class:"block text-sm font-medium text-zinc-400 mb-1"},"User",-1)),l(s(C),{modelValue:s(f).user,"onUpdate:modelValue":e[3]||(e[3]=n=>s(f).user=n),type:"text",id:"user",class:"w-full font-mono"},null,8,["modelValue"]),s(f).errors.user?(o(),a("p",Xt,d(s(f).errors.user),1)):m("",!0)]),t("div",null,[e[22]||(e[22]=t("label",{for:"port",class:"block text-sm font-medium text-zinc-400 mb-1"},"Port",-1)),l(s(C),{modelValue:s(f).port,"onUpdate:modelValue":e[4]||(e[4]=n=>s(f).port=n),type:"number",id:"port",class:"w-full font-mono"},null,8,["modelValue"]),s(f).errors.port?(o(),a("p",Wt,d(s(f).errors.port),1)):m("",!0)])])])]),e[24]||(e[24]=t("hr",{class:"border-zinc-800"},null,-1))],64)),t("div",Gt,[l(s(x),{type:"submit",disabled:s(f).processing||L.value,variant:"secondary"},{default:r(()=>[c(d(s(f).processing||L.value?"Saving...":"Save Environment"),1)]),_:1},8,["disabled"])])],32),e[63]||(e[63]=t("hr",{class:"border-zinc-800"},null,-1)),t("div",Jt,[e[34]||(e[34]=t("h2",{class:"text-lg font-medium text-white mb-6"},"Orbit Configuration",-1)),oe.value?(o(),a("div",Zt,[l(s(le),{class:"w-4 h-4 inline animate-spin mr-2"}),e[27]||(e[27]=c(" Loading configuration... ",-1))])):(o(),a(h,{key:1},[t("div",Qt,[e[29]||(e[29]=t("div",null,[t("h3",{class:"text-sm font-medium text-white"},"Site Paths"),t("p",{class:"text-sm text-zinc-500 mt-1"}," Directories where your sites are located. ")],-1)),t("div",null,[t("div",es,[(o(!0),a(h,null,V(z.value,(n,u)=>(o(),a("div",{key:u,class:"flex items-center gap-2"},[l(s(C),{modelValue:z.value[u],"onUpdate:modelValue":w=>z.value[u]=w,type:"text",placeholder:"/home/user/sites",class:"flex-1 font-mono"},null,8,["modelValue","onUpdate:modelValue"]),t("button",{onClick:w=>Oe(u),type:"button",class:"text-zinc-500 hover:text-white p-2 transition-colors",title:"Browse directories"},[l(s(ve),{class:"w-4 h-4"})],8,ts),t("button",{onClick:w=>Ie(u),type:"button",class:"text-zinc-500 hover:text-red-400 p-2 transition-colors"},[l(s(pe),{class:"w-4 h-4"})],8,ss)]))),128))]),t("button",{onClick:Be,type:"button",class:"mt-2 text-sm text-zinc-400 hover:text-white transition-colors flex items-center gap-1"},[l(s(bt),{class:"w-4 h-4"}),e[28]||(e[28]=c(" Add path ",-1))])])]),e[32]||(e[32]=t("hr",{class:"border-zinc-800"},null,-1)),t("div",ns,[t("div",null,[e[30]||(e[30]=t("h3",{class:"text-sm font-medium text-white"},"TLD",-1)),t("p",ls," Top-level domain for local sites. Sites will be accessible at sitename."+d(U.value||"test"),1)]),t("div",null,[l(s(C),{modelValue:U.value,"onUpdate:modelValue":e[5]||(e[5]=n=>U.value=n),type:"text",id:"config-tld",placeholder:"test",class:"w-full font-mono"},null,8,["modelValue"])])]),e[33]||(e[33]=t("hr",{class:"border-zinc-800"},null,-1)),t("div",os,[e[31]||(e[31]=t("div",null,[t("h3",{class:"text-sm font-medium text-white"},"Default PHP Version"),t("p",{class:"text-sm text-zinc-500 mt-1"},"PHP version used for new sites.")],-1)),t("div",null,[l(s(Pe),{modelValue:Y.value,"onUpdate:modelValue":e[6]||(e[6]=n=>Y.value=n)},{default:r(()=>[l(s(Se),{class:"w-full"},{default:r(()=>[l(s(Ve),{placeholder:"Select PHP version"})]),_:1}),l(s($e),null,{default:r(()=>[(o(!0),a(h,null,V(ge.value,n=>(o(),_(s(De),{key:n,value:n},{default:r(()=>[c(" PHP "+d(n),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])])]),t("div",is,[l(s(x),{onClick:qe,type:"button",disabled:q.value,variant:"secondary"},{default:r(()=>[c(d(q.value?"Saving...":"Save Configuration"),1)]),_:1},8,["disabled"])])],64))]),e[64]||(e[64]=t("hr",{class:"border-zinc-800"},null,-1)),t("div",as,[l(Vt,{"environment-id":g.environment.id},null,8,["environment-id"])]),e[65]||(e[65]=t("hr",{class:"border-zinc-800"},null,-1)),t("div",rs,[e[40]||(e[40]=t("h2",{class:"text-lg font-medium text-white mb-6"},"External Access",-1)),t("div",ds,[e[39]||(e[39]=t("div",null,[t("h3",{class:"text-sm font-medium text-white"},"Enable External Access"),t("p",{class:"text-sm text-zinc-500 mt-1"}," Enable SSH links for accessing this environment from external machines. ")],-1)),t("div",us,[t("div",cs,[l(s(T),{for:"external_access",class:"text-zinc-400"},{default:r(()=>[...e[35]||(e[35]=[c(" Enable external access ",-1)])]),_:1}),l(s(me),{id:"external_access",checked:s(P).external_access,"onUpdate:checked":e[7]||(e[7]=n=>s(P).external_access=n)},null,8,["checked"])]),s(P).external_access?(o(),a("div",ms,[t("div",null,[l(s(T),{for:"external_host",class:"text-zinc-400 mb-1.5"},{default:r(()=>[...e[36]||(e[36]=[c(" External Host / IP ",-1)])]),_:1}),l(s(C),{modelValue:s(P).external_host,"onUpdate:modelValue":e[8]||(e[8]=n=>s(P).external_host=n),type:"text",id:"external_host",placeholder:"e.g. 192.168.1.100 or myserver.example.com",class:"w-full font-mono"},null,8,["modelValue"]),e[37]||(e[37]=t("p",{class:"mt-1 text-xs text-zinc-500"}," The hostname or IP address external users will use to connect via SSH. ",-1))]),l(s(x),{type:"button",onClick:ze,disabled:s(P).processing,variant:"outline",size:"sm"},{default:r(()=>[...e[38]||(e[38]=[c(" Save External Access ",-1)])]),_:1},8,["disabled"])])):m("",!0)])])]),e[66]||(e[66]=t("hr",{class:"border-zinc-800"},null,-1)),t("div",vs,[e[44]||(e[44]=t("h2",{class:"text-lg font-medium text-white mb-6"},"Template Favorites",-1)),t("div",ps,[e[43]||(e[43]=t("div",null,[t("h3",{class:"text-sm font-medium text-white"},"Site Templates"),t("p",{class:"text-sm text-zinc-500 mt-1"}," Manage your favorite site templates for quick project creation. ")],-1)),t("div",fs,[g.templateFavorites.length===0?(o(),a("div",xs,[l(s(Dt),{class:"w-8 h-8 mx-auto mb-2 text-zinc-600"}),e[41]||(e[41]=t("p",{class:"text-sm"},"No template favorites yet.",-1))])):(o(),a("div",ys,[(o(!0),a(h,null,V(g.templateFavorites,n=>(o(),a("div",{key:n.id,class:"flex items-center justify-between rounded-lg border border-zinc-700 bg-zinc-800/50 px-4 py-3"},[t("div",hs,[t("div",gs,[t("span",bs,d(n.display_name),1),n.usage_count>0?(o(),_(s(Ee),{key:0,variant:"secondary"},{default:r(()=>[c(" Used "+d(n.usage_count)+"x ",1)]),_:2},1024)):m("",!0)]),t("p",ks,d(n.repo_url),1)]),t("div",ws,[l(s(x),{type:"button",onClick:u=>ut(n.repo_url),variant:"ghost",size:"icon-sm",title:"Open on GitHub"},{default:r(()=>[l(s(wt),{class:"w-4 h-4"})]),_:1},8,["onClick"]),l(s(x),{type:"button",onClick:u=>ot(n),variant:"ghost",size:"icon-sm",title:"Edit"},{default:r(()=>[l(s(Ue),{class:"w-4 h-4"})]),_:1},8,["onClick"]),l(s(x),{type:"button",onClick:u=>at(n),variant:"ghost",size:"icon-sm",class:"hover:text-red-400",title:"Delete"},{default:r(()=>[l(s(pe),{class:"w-4 h-4"})]),_:1},8,["onClick"])])]))),128))])),l(s(x),{type:"button",onClick:lt,variant:"outline"},{default:r(()=>[...e[42]||(e[42]=[c(" Add Template ",-1)])]),_:1})])])]),e[67]||(e[67]=t("hr",{class:"border-zinc-800"},null,-1)),i.$page.props.multi_environment?(o(),a("div",_s,[e[49]||(e[49]=t("h2",{class:"text-lg font-medium text-white mb-6"},"SSH Public Keys",-1)),t("div",zs,[e[48]||(e[48]=t("div",null,[t("h3",{class:"text-sm font-medium text-white"},"Manage SSH Keys"),t("p",{class:"text-sm text-zinc-500 mt-1"}," SSH keys for environment provisioning. ")],-1)),t("div",Cs,[g.sshKeys.length===0?(o(),a("div",Ss,[l(s(Pt),{class:"w-8 h-8 mx-auto mb-2 text-zinc-600"}),e[45]||(e[45]=t("p",{class:"text-sm"},"No SSH keys configured.",-1))])):(o(),a("div",Vs,[(o(!0),a(h,null,V(g.sshKeys,n=>(o(),a("div",{key:n.id,class:"flex items-center justify-between rounded-lg border border-zinc-700 bg-zinc-800/50 px-4 py-3"},[t("div",$s,[t("div",Ds,[t("span",Ps,d(n.name),1),n.is_default?(o(),_(s(Ee),{key:0,class:"bg-lime-400/10 text-lime-300 border-lime-400/20"},{default:r(()=>[...e[46]||(e[46]=[c(" Default ",-1)])]),_:1})):m("",!0)]),t("p",Es,d(nt(n.public_key,50)),1)]),t("div",Ts,[l(s(x),{type:"button",onClick:u=>tt(n),variant:"ghost",size:"icon-sm",title:"Copy"},{default:r(()=>[l(s(Ft),{class:"w-4 h-4"})]),_:1},8,["onClick"]),n.is_default?m("",!0):(o(),_(s(x),{key:0,type:"button",onClick:u=>et(n),variant:"ghost",size:"icon-sm",class:"hover:text-lime-400",title:"Set default"},{default:r(()=>[l(s(Et),{class:"w-4 h-4"})]),_:1},8,["onClick"])),l(s(x),{type:"button",onClick:u=>Je(n),variant:"ghost",size:"icon-sm",title:"Edit"},{default:r(()=>[l(s(Ue),{class:"w-4 h-4"})]),_:1},8,["onClick"]),l(s(x),{type:"button",onClick:u=>Qe(n),variant:"ghost",size:"icon-sm",class:"hover:text-red-400",title:"Delete"},{default:r(()=>[l(s(pe),{class:"w-4 h-4"})]),_:1},8,["onClick"])])]))),128))])),l(s(x),{type:"button",onClick:Ge,variant:"outline"},{default:r(()=>[...e[47]||(e[47]=[c(" Add SSH Key ",-1)])]),_:1})])])])):m("",!0),i.$page.props.multi_environment?(o(),a("hr",Us)):m("",!0),i.$page.props.multi_environment?(o(),a("div",Fs,[e[52]||(e[52]=t("h2",{class:"text-lg font-medium text-white mb-6"},"Desktop Settings",-1)),t("div",As,[e[50]||(e[50]=t("div",null,[t("h3",{class:"text-sm font-medium text-white"},"Desktop Notifications"),t("p",{class:"text-sm text-zinc-500 mt-1"}," Show system notifications for site events. ")],-1)),t("div",Hs,[l(s(me),{checked:s(R).enabled,"onUpdate:checked":ct,disabled:s(R).processing},null,8,["checked","disabled"])])]),t("div",Ns,[e[51]||(e[51]=t("div",null,[t("h3",{class:"text-sm font-medium text-white"},"Menu Bar Icon"),t("p",{class:"text-sm text-zinc-500 mt-1"}," Show Orbit in the system menu bar for quick access. ")],-1)),t("div",js,[l(s(me),{checked:s(B).enabled,"onUpdate:checked":mt,disabled:s(B).processing},null,8,["checked","disabled"])])])])):m("",!0),i.$page.props.multi_environment?(o(),a("hr",Ks)):m("",!0),t("div",Ms,[t("div",Rs,[t("div",Bs,[l(s(fe),{class:"w-5 h-5 text-zinc-400"}),e[53]||(e[53]=t("h2",{class:"text-lg font-medium text-white"},"Health Check",-1)),b.value?(o(),a("span",{key:0,class:Ce(["text-xs px-2 py-0.5 rounded-full",b.value.status==="healthy"?"bg-lime-500/10 text-lime-400":b.value.status==="degraded"?"bg-amber-500/10 text-amber-400":"bg-red-500/10 text-red-400"])},d(b.value.status==="healthy"?"All Passed":b.value.status==="degraded"?"Warnings":"Issues Found"),3)):m("",!0)]),l(s(x),{onClick:ke,disabled:A.value,variant:"outline"},{default:r(()=>[A.value?(o(),_(s(Tt),{key:0,class:"w-4 h-4 animate-spin"})):(o(),_(s(fe),{key:1,class:"w-4 h-4"})),c(" "+d(A.value?"Running...":"Run Diagnostics"),1)]),_:1},8,["disabled"])]),D.value?(o(),a("div",Is,[t("div",Os,[l(s(Fe),{class:"w-5 h-5"}),t("span",null,d(D.value),1)])])):m("",!0),b.value?(o(),a("div",Ls,[t("div",qs,[t("span",Ys,d(b.value.summary.passed)+" passed",1),b.value.summary.warnings>0?(o(),a("span",Xs,d(b.value.summary.warnings)+" warnings ",1)):m("",!0),b.value.summary.errors>0?(o(),a("span",Ws,d(b.value.summary.errors)+" errors ",1)):m("",!0)]),(o(!0),a(h,null,V(b.value.checks,(n,u)=>(o(),a("div",{key:u,class:"border border-zinc-700/50 rounded-lg overflow-hidden"},[t("button",{onClick:w=>He(u),class:"w-full flex items-center justify-between p-3 bg-zinc-800/30 hover:bg-zinc-700/30 transition-colors text-left"},[t("div",Js,[n.status==="ok"?(o(),_(s(At),{key:0,class:"w-5 h-5 text-lime-400"})):n.status==="warning"?(o(),_(s(Te),{key:1,class:"w-5 h-5 text-amber-400"})):(o(),_(s(Fe),{key:2,class:"w-5 h-5 text-red-400"})),t("div",null,[t("span",Zs,d(Ae[u]||u),1),t("p",Qs,d(n.message),1)])]),t("div",en,[n.status==="error"&&n.details?.can_fix?(o(),_(s(x),{key:0,onClick:te(w=>Ne(u),["stop"]),disabled:j.value.has(u),variant:"secondary",size:"sm"},{default:r(()=>[j.value.has(u)?(o(),_(s(le),{key:0,class:"w-3 h-3 animate-spin mr-1"})):m("",!0),c(" "+d(j.value.has(u)?"Fixing...":"Fix"),1)]),_:2},1032,["onClick","disabled"])):m("",!0),n.details&&Object.keys(n.details).length>0?(o(),_(s(_t),{key:1,class:Ce(["w-4 h-4 text-zinc-500 transition-transform",N.value.has(u)?"rotate-180":""])},null,8,["class"])):m("",!0)])],8,Gs),N.value.has(u)&&n.details&&Object.keys(n.details).filter(w=>w!=="can_fix").length>0?(o(),a("div",tn,[t("dl",sn,[(o(!0),a(h,null,V(n.details,(w,ue)=>zt((o(),a("div",{key:ue,class:"flex"},[t("dt",nn,d(ue),1),t("dd",ln,[Array.isArray(w)?(o(!0),a(h,{key:0},V(w,(vt,pt)=>(o(),a("span",{key:pt,class:"block"},d(vt),1))),128)):typeof w=="object"&&w!==null?(o(),a("pre",on,d(JSON.stringify(w,null,2)),1)):(o(),a(h,{key:2},[c(d(w),1)],64))])])),[[Ct,ue!=="can_fix"]])),128))])])):m("",!0)]))),128))])):!A.value&&!D.value?(o(),a("div",an,[l(s(fe),{class:"w-12 h-12 mx-auto mb-3 opacity-50"}),e[54]||(e[54]=t("p",null,"Run diagnostics to check the health of this environment",-1))])):m("",!0)]),e[68]||(e[68]=t("hr",{class:"border-zinc-800"},null,-1)),i.$page.props.multi_environment?(o(),a("div",rn,[e[62]||(e[62]=t("h2",{class:"text-lg font-medium text-red-400 mb-6"},"Danger Zone",-1)),t("div",dn,[e[61]||(e[61]=t("div",null,[t("h3",{class:"text-sm font-medium text-white"},"Delete Environment"),t("p",{class:"text-sm text-zinc-500 mt-1"}," Permanently delete this environment. This action cannot be undone. ")],-1)),t("div",null,[ie.value?(o(),a("div",cn,[t("div",mn,[l(s(Te),{class:"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5"}),t("div",null,[e[58]||(e[58]=t("p",{class:"text-sm text-red-300 font-medium"},"Are you sure?",-1)),t("p",vn,[e[56]||(e[56]=c(" Type ",-1)),t("strong",pn,d(g.environment.name),1),e[57]||(e[57]=c(" to confirm. ",-1))])])]),l(s(C),{modelValue:F.value,"onUpdate:modelValue":e[9]||(e[9]=n=>F.value=n),type:"text",placeholder:"Type environment name",class:"w-full"},null,8,["modelValue"]),t("div",fn,[l(s(x),{onClick:We,type:"button",disabled:F.value!==g.environment.name,variant:"destructive"},{default:r(()=>[...e[59]||(e[59]=[c(" Delete ",-1)])]),_:1},8,["disabled"]),l(s(x),{onClick:Xe,type:"button",variant:"ghost"},{default:r(()=>[...e[60]||(e[60]=[c(" Cancel ",-1)])]),_:1})])])):(o(),a("div",un,[l(s(x),{onClick:Ye,type:"button",variant:"destructive"},{default:r(()=>[...e[55]||(e[55]=[c(" Delete Environment ",-1)])]),_:1})]))])])])):m("",!0)]),l(ce,{show:J.value,title:E.value?"Edit SSH Key":"Add SSH Key",onClose:Z},{default:r(()=>[t("form",{onSubmit:te(Ze,["prevent"])},[t("div",xn,[t("div",null,[l(s(T),{for:"keyName",class:"text-zinc-400 mb-1.5"},{default:r(()=>[...e[69]||(e[69]=[c("Name",-1)])]),_:1}),l(s(C),{modelValue:s(k).name,"onUpdate:modelValue":e[10]||(e[10]=n=>s(k).name=n),type:"text",id:"keyName",required:"",placeholder:"e.g., MacBook Pro",class:"w-full"},null,8,["modelValue"])]),Object.keys(g.availableSshKeys).length>0&&!E.value?(o(),a("div",yn,[l(s(T),{class:"text-zinc-400 mb-1.5"},{default:r(()=>[...e[70]||(e[70]=[c("Import from ~/.ssh/",-1)])]),_:1}),t("select",{onChange:st,class:"w-full"},[e[71]||(e[71]=t("option",{value:""},"Select a key to import...",-1)),(o(!0),a(h,null,V(g.availableSshKeys,(n,u)=>(o(),a("option",{key:u,value:n.content,"data-name":String(u).replace(".pub","")},d(u)+" ("+d(n.type)+") ",9,hn))),128))],32)])):m("",!0),t("div",null,[l(s(T),{for:"keyPublicKey",class:"text-zinc-400 mb-1.5"},{default:r(()=>[...e[72]||(e[72]=[c("Public Key",-1)])]),_:1}),l(s($t),{modelValue:s(k).public_key,"onUpdate:modelValue":e[11]||(e[11]=n=>s(k).public_key=n),id:"keyPublicKey",rows:"4",required:"",placeholder:"ssh-ed25519 AAAA...",class:"w-full font-mono text-sm"},null,8,["modelValue"])])]),t("div",gn,[l(s(x),{type:"button",onClick:Z,variant:"ghost"},{default:r(()=>[...e[73]||(e[73]=[c("Cancel",-1)])]),_:1}),l(s(x),{type:"submit",disabled:s(k).processing,variant:"secondary"},{default:r(()=>[...e[74]||(e[74]=[c(" Save ",-1)])]),_:1},8,["disabled"])])],32)]),_:1},8,["show","title"]),l(ce,{show:Q.value,title:S.value?"Edit Template":"Add Template",onClose:ee},{default:r(()=>[t("form",{onSubmit:te(it,["prevent"])},[t("div",bn,[S.value?(o(),a("div",wn,[e[76]||(e[76]=t("span",{class:"font-medium"},"Repository:",-1)),c(" "+d(S.value.repo_url),1)])):(o(),a("div",kn,[l(s(T),{for:"templateRepoUrl",class:"text-zinc-400 mb-1.5"},{default:r(()=>[...e[75]||(e[75]=[c("Repository URL",-1)])]),_:1}),l(s(C),{modelValue:s(y).repo_url,"onUpdate:modelValue":e[12]||(e[12]=n=>s(y).repo_url=n),onBlur:dt,type:"text",id:"templateRepoUrl",required:"",placeholder:"owner/repo or https://github.com/owner/repo",class:"w-full"},null,8,["modelValue"])])),t("div",null,[l(s(T),{for:"templateDisplayName",class:"text-zinc-400 mb-1.5"},{default:r(()=>[...e[77]||(e[77]=[c("Display Name",-1)])]),_:1}),l(s(C),{modelValue:s(y).display_name,"onUpdate:modelValue":e[13]||(e[13]=n=>s(y).display_name=n),type:"text",id:"templateDisplayName",required:"",placeholder:"e.g., Laravel, Next.js Starter",class:"w-full"},null,8,["modelValue"])])]),t("div",_n,[l(s(x),{type:"button",onClick:ee,variant:"ghost"},{default:r(()=>[...e[78]||(e[78]=[c(" Cancel ",-1)])]),_:1}),l(s(x),{type:"submit",disabled:s(y).processing,variant:"secondary"},{default:r(()=>[c(d(S.value?"Update":"Add"),1)]),_:1},8,["disabled"])])],32)]),_:1},8,["show","title"]),l(ce,{show:ae.value,title:"Select Directory",onClose:de},{default:r(()=>[t("div",zn,[t("div",Cn,[l(s(ve),{class:"w-4 h-4 text-zinc-400 flex-shrink-0"}),t("span",Sn,d(K.value),1)]),G.value?(o(),a("div",Vn,[l(s(le),{class:"w-6 h-6 animate-spin mx-auto text-zinc-400"}),e[79]||(e[79]=t("p",{class:"mt-2 text-sm text-zinc-500"},"Loading directories...",-1))])):M.value?(o(),a("div",$n,[l(s(Ut),{class:"w-8 h-8 mx-auto text-red-400"}),t("p",Dn,d(M.value),1)])):(o(),a("div",Pn,[W.value?(o(),a("button",{key:0,onClick:e[14]||(e[14]=n=>_e(W.value)),class:"w-full flex items-center gap-3 px-3 py-2 text-left hover:bg-zinc-700/50 rounded-lg transition-colors"},[l(s(kt),{class:"w-4 h-4 text-zinc-500 rotate-180"}),e[80]||(e[80]=t("span",{class:"text-sm text-zinc-400"},"..",-1))])):m("",!0),(o(!0),a(h,null,V(re.value,n=>(o(),a("button",{key:n.path,onClick:u=>_e(n.path),class:"w-full flex items-center gap-3 px-3 py-2 text-left hover:bg-zinc-700/50 rounded-lg transition-colors group"},[l(s(ve),{class:"w-4 h-4 text-zinc-500 group-hover:text-white"}),t("span",Tn,d(n.name),1)],8,En))),128)),re.value.length===0&&!W.value?(o(),a("div",Un,[...e[81]||(e[81]=[t("p",{class:"text-sm"},"No subdirectories",-1)])])):m("",!0)]))]),t("div",Fn,[l(s(x),{type:"button",onClick:de,variant:"ghost"},{default:r(()=>[...e[82]||(e[82]=[c(" Cancel ",-1)])]),_:1}),l(s(x),{type:"button",onClick:Le,variant:"secondary",disabled:G.value},{default:r(()=>[...e[83]||(e[83]=[c(" Select This Directory ",-1)])]),_:1},8,["disabled"])])]),_:1},8,["show"])],64))}});export{Wn as default};
