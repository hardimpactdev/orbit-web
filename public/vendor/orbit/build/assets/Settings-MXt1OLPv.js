import{j as F,d as ie,k as w,c as r,g as a,a as t,u as s,h as de,f,m as H,v as A,F as h,i as S,w as i,b as u,p as E,r as T,o as n,t as y,e as U,E as ue,q as D}from"./app-DCjzOA_Z.js";import{_ as z}from"./Modal.vue_vue_type_script_setup_true_lang-Bho30n21.js";import{H as j,I as p,X as C,Y as B,V as me,D as L}from"./craft-ui-LxbrBGk3.js";import{C as pe}from"./copy-BspJOIuu.js";import{P as O}from"./pencil-oyAFyiBy.js";import{T as R}from"./trash-2-C8A-D6Uu.js";const ce=F("file-code-corner",[["path",{d:"M4 12.15V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.706.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2h-3.35",key:"1wthlu"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m5 16-3 3 3 3",key:"331omg"}],["path",{d:"m9 22 3-3-3-3",key:"lsp7cz"}]]);const fe=F("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);const ye=F("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),ve={key:0,class:"grid gap-x-8 gap-y-6 sm:grid-cols-2"},ge=["value"],be={key:1,class:"my-10 border-t border-border"},xe={key:2,class:"grid gap-x-8 gap-y-6 sm:grid-cols-2"},he=["value"],ke={key:3,class:"my-10 border-t border-border"},_e={key:4,class:"grid gap-x-8 gap-y-6 sm:grid-cols-2"},we={class:"flex items-center"},Se={key:5,class:"my-10 border-t border-border"},Ce={key:6,class:"grid gap-x-8 gap-y-6 sm:grid-cols-2"},$e={class:"flex items-center"},Ke={key:7,class:"my-10 border-t border-border"},Ve={key:8,class:"grid gap-x-8 gap-y-6 sm:grid-cols-2"},Me={class:"space-y-4"},Ne={key:0,class:"text-center py-6 text-muted-foreground"},Te={key:1,class:"space-y-3"},Ee={class:"min-w-0 flex-1"},Ue={class:"flex items-center gap-2"},De={class:"text-sm font-medium text-foreground"},Be={class:"mt-0.5 truncate font-mono text-xs text-muted-foreground"},Fe={class:"ml-4 flex items-center gap-1"},He={class:"grid gap-x-8 gap-y-6 sm:grid-cols-2"},Ae={class:"space-y-4"},ze={key:0,class:"text-center py-6 text-muted-foreground"},je={key:1,class:"space-y-3"},Le={class:"min-w-0 flex-1"},Oe={class:"flex items-center gap-2"},Re={class:"text-sm font-medium text-foreground"},qe={class:"mt-0.5 font-mono text-xs text-muted-foreground"},Pe={class:"ml-4 flex items-center gap-1"},Ie={class:"flex justify-end gap-4"},Ye={class:"p-6 space-y-4"},Ge={key:0},We=["value","data-name"],Xe={class:"flex justify-end gap-4 px-6 py-4 border-t border-border"},Je={class:"p-6 space-y-4"},Qe={key:0},Ze={key:1,class:"text-sm text-muted-foreground"},et={class:"flex justify-end gap-4 px-6 py-4 border-t border-border"},rt=ie({__name:"Settings",props:{editor:{},editorOptions:{},terminal:{},terminalOptions:{},sshKeys:{},availableSshKeys:{},templateFavorites:{},notificationsEnabled:{type:Boolean},menuBarEnabled:{type:Boolean}},setup(g){const $=g,x=w({editor:$.editor.scheme,terminal:$.terminal}),q=()=>{x.post("/settings")},K=T(!1),b=T(null),c=w({name:"",public_key:""}),P=()=>{b.value=null,c.reset(),K.value=!0},I=l=>{b.value=l,c.name=l.name,c.public_key=l.public_key,K.value=!0},V=()=>{K.value=!1,b.value=null,c.reset()},Y=()=>{b.value?c.put(`/ssh-keys/${b.value.id}`,{onSuccess:V}):c.post("/ssh-keys",{onSuccess:V})},G=l=>{confirm("Delete this SSH key?")&&D.delete(`/ssh-keys/${l.id}`)},W=l=>{D.post(`/ssh-keys/${l.id}/default`)},X=async l=>{await navigator.clipboard.writeText(l.public_key)},J=l=>{const o=l.target.selectedOptions[0];if(o.value){c.public_key=o.value;const d=o.dataset.name;d&&!c.name&&(c.name=d)}},Q=(l,e=80)=>l.length>e?l.substring(0,e)+"...":l,M=T(!1),v=T(null),m=w({repo_url:"",display_name:""}),Z=()=>{v.value=null,m.reset(),M.value=!0},ee=l=>{v.value=l,m.repo_url=l.repo_url,m.display_name=l.display_name,M.value=!0},N=()=>{M.value=!1,v.value=null,m.reset()},te=()=>{v.value?m.put(`/template-favorites/${v.value.id}`,{onSuccess:N}):m.post("/template-favorites",{onSuccess:N})},se=l=>{confirm("Delete this template?")&&D.delete(`/template-favorites/${l.id}`)},oe=l=>{const e=l.match(/(?:github\.com\/)?([^/]+)\/([^/]+)/);return e?e[2]:l},le=()=>{!v.value&&m.repo_url&&!m.display_name&&(m.display_name=oe(m.repo_url))},ae=l=>{const e=l.startsWith("http")?l:`https://github.com/${l}`;window.open(e,"_blank")},k=w({enabled:$.notificationsEnabled}),ne=()=>{k.enabled=!k.enabled,k.post("/settings/notifications")},_=w({enabled:$.menuBarEnabled}),re=()=>{_.enabled=!_.enabled,_.post("/settings/menu-bar")};return(l,e)=>(n(),r(h,null,[a(s(de),{title:"Settings"}),t("form",{onSubmit:E(q,["prevent"]),class:"mx-auto max-w-4xl"},[e[19]||(e[19]=t("h1",{class:"text-2xl font-semibold text-white sm:text-xl"},"Settings",-1)),e[20]||(e[20]=t("hr",{class:"mt-6 mb-10 border-t border-white/10"},null,-1)),l.$page.props.multi_environment?(n(),r("section",ve,[e[6]||(e[6]=t("div",{class:"space-y-1"},[t("h2",{class:"text-sm font-semibold text-foreground"},"Code Editor"),t("p",{class:"text-sm text-muted-foreground"}," Select your preferred editor for opening remote sites. ")],-1)),t("div",null,[H(t("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>s(x).editor=o),class:"w-full"},[(n(!0),r(h,null,S(g.editorOptions,(o,d)=>(n(),r("option",{key:d,value:d},y(o),9,ge))),128))],512),[[A,s(x).editor]])])])):f("",!0),l.$page.props.multi_environment?(n(),r("hr",be)):f("",!0),l.$page.props.multi_environment?(n(),r("section",xe,[e[7]||(e[7]=t("div",{class:"space-y-1"},[t("h2",{class:"text-sm font-semibold text-foreground"},"Terminal"),t("p",{class:"text-sm text-muted-foreground"}," Select your preferred terminal for SSH connections. ")],-1)),t("div",null,[H(t("select",{"onUpdate:modelValue":e[1]||(e[1]=o=>s(x).terminal=o),class:"w-full"},[(n(!0),r(h,null,S(g.terminalOptions,(o,d)=>(n(),r("option",{key:d,value:d},y(o),9,he))),128))],512),[[A,s(x).terminal]])])])):f("",!0),l.$page.props.multi_environment?(n(),r("hr",ke)):f("",!0),l.$page.props.multi_environment?(n(),r("section",_e,[e[8]||(e[8]=t("div",{class:"space-y-1"},[t("h2",{class:"text-sm font-semibold text-foreground"},"Desktop Notifications"),t("p",{class:"text-sm text-muted-foreground"},"Show system notifications for site events.")],-1)),t("div",we,[a(s(j),{checked:s(k).enabled,"onUpdate:checked":ne,disabled:s(k).processing},null,8,["checked","disabled"])])])):f("",!0),l.$page.props.multi_environment?(n(),r("hr",Se)):f("",!0),l.$page.props.multi_environment?(n(),r("section",Ce,[e[9]||(e[9]=t("div",{class:"space-y-1"},[t("h2",{class:"text-sm font-semibold text-foreground"},"Menu Bar Icon"),t("p",{class:"text-sm text-muted-foreground"}," Show Orbit in the system menu bar for quick access. ")],-1)),t("div",$e,[a(s(j),{checked:s(_).enabled,"onUpdate:checked":re,disabled:s(_).processing},null,8,["checked","disabled"])])])):f("",!0),l.$page.props.multi_environment?(n(),r("hr",Ke)):f("",!0),l.$page.props.multi_environment?(n(),r("section",Ve,[e[13]||(e[13]=t("div",{class:"space-y-1"},[t("h2",{class:"text-sm font-semibold text-foreground"},"SSH Public Keys"),t("p",{class:"text-sm text-muted-foreground"},"Manage SSH keys for environment provisioning.")],-1)),t("div",Me,[g.sshKeys.length===0?(n(),r("div",Ne,[a(s(fe),{class:"w-8 h-8 mx-auto mb-2 text-muted-foreground"}),e[10]||(e[10]=t("p",{class:"text-sm"},"No SSH keys configured.",-1))])):(n(),r("div",Te,[(n(!0),r(h,null,S(g.sshKeys,o=>(n(),r("div",{key:o.id,class:"flex items-center justify-between rounded-lg border border-border bg-card px-4 py-3"},[t("div",Ee,[t("div",Ue,[t("span",De,y(o.name),1),o.is_default?(n(),U(s(L),{key:0,class:"bg-lime-400/10 text-lime-300 border-lime-400/20"},{default:i(()=>[...e[11]||(e[11]=[u("Default",-1)])]),_:1})):f("",!0)]),t("p",Be,y(Q(o.public_key,50)),1)]),t("div",Fe,[a(s(p),{type:"button",onClick:d=>X(o),variant:"ghost",size:"icon-sm",title:"Copy"},{default:i(()=>[a(s(pe),{class:"w-4 h-4"})]),_:1},8,["onClick"]),o.is_default?f("",!0):(n(),U(s(p),{key:0,type:"button",onClick:d=>W(o),variant:"ghost",size:"icon-sm",class:"hover:text-lime-400",title:"Set default"},{default:i(()=>[a(s(ye),{class:"w-4 h-4"})]),_:1},8,["onClick"])),a(s(p),{type:"button",onClick:d=>I(o),variant:"ghost",size:"icon-sm",title:"Edit"},{default:i(()=>[a(s(O),{class:"w-4 h-4"})]),_:1},8,["onClick"]),a(s(p),{type:"button",onClick:d=>G(o),variant:"ghost",size:"icon-sm",class:"hover:text-red-400",title:"Delete"},{default:i(()=>[a(s(R),{class:"w-4 h-4"})]),_:1},8,["onClick"])])]))),128))])),a(s(p),{type:"button",onClick:P,variant:"outline"},{default:i(()=>[...e[12]||(e[12]=[u(" Add SSH Key ",-1)])]),_:1})])])):f("",!0),e[21]||(e[21]=t("hr",{class:"my-10 border-t border-white/5"},null,-1)),t("section",He,[e[16]||(e[16]=t("div",{class:"space-y-1"},[t("h2",{class:"text-sm font-semibold text-foreground"},"Template Favorites"),t("p",{class:"text-sm text-muted-foreground"},"Manage your favorite site templates.")],-1)),t("div",Ae,[g.templateFavorites.length===0?(n(),r("div",ze,[a(s(ce),{class:"w-8 h-8 mx-auto mb-2 text-muted-foreground"}),e[14]||(e[14]=t("p",{class:"text-sm"},"No template favorites yet.",-1))])):(n(),r("div",je,[(n(!0),r(h,null,S(g.templateFavorites,o=>(n(),r("div",{key:o.id,class:"flex items-center justify-between rounded-lg border border-border bg-card px-4 py-3"},[t("div",Le,[t("div",Oe,[t("span",Re,y(o.display_name),1),o.usage_count>0?(n(),U(s(L),{key:0,variant:"secondary"},{default:i(()=>[u("Used "+y(o.usage_count)+"x",1)]),_:2},1024)):f("",!0)]),t("p",qe,y(o.repo_url),1)]),t("div",Pe,[a(s(p),{type:"button",onClick:d=>ae(o.repo_url),variant:"ghost",size:"icon-sm",title:"Open on GitHub"},{default:i(()=>[a(s(ue),{class:"w-4 h-4"})]),_:1},8,["onClick"]),a(s(p),{type:"button",onClick:d=>ee(o),variant:"ghost",size:"icon-sm",title:"Edit"},{default:i(()=>[a(s(O),{class:"w-4 h-4"})]),_:1},8,["onClick"]),a(s(p),{type:"button",onClick:d=>se(o),variant:"ghost",size:"icon-sm",class:"hover:text-red-400",title:"Delete"},{default:i(()=>[a(s(R),{class:"w-4 h-4"})]),_:1},8,["onClick"])])]))),128))])),a(s(p),{type:"button",onClick:Z,variant:"outline"},{default:i(()=>[...e[15]||(e[15]=[u(" Add Template ",-1)])]),_:1})])]),e[22]||(e[22]=t("hr",{class:"my-10 border-t border-border"},null,-1)),t("div",Ie,[a(s(p),{type:"reset",variant:"ghost"},{default:i(()=>[...e[17]||(e[17]=[u("Reset",-1)])]),_:1}),a(s(p),{type:"submit",disabled:s(x).processing,variant:"secondary"},{default:i(()=>[...e[18]||(e[18]=[u(" Save changes ",-1)])]),_:1},8,["disabled"])])],32),a(z,{show:K.value,title:b.value?"Edit SSH Key":"Add SSH Key",onClose:V},{default:i(()=>[t("form",{onSubmit:E(Y,["prevent"])},[t("div",Ye,[t("div",null,[a(s(C),{for:"keyName",class:"text-muted-foreground mb-1.5"},{default:i(()=>[...e[23]||(e[23]=[u("Name",-1)])]),_:1}),a(s(B),{modelValue:s(c).name,"onUpdate:modelValue":e[2]||(e[2]=o=>s(c).name=o),type:"text",id:"keyName",required:"",placeholder:"e.g., MacBook Pro",class:"w-full"},null,8,["modelValue"])]),Object.keys(g.availableSshKeys).length>0&&!b.value?(n(),r("div",Ge,[a(s(C),{class:"text-muted-foreground mb-1.5"},{default:i(()=>[...e[24]||(e[24]=[u("Import from ~/.ssh/",-1)])]),_:1}),t("select",{onChange:J,class:"w-full"},[e[25]||(e[25]=t("option",{value:""},"Select a key to import...",-1)),(n(!0),r(h,null,S(g.availableSshKeys,(o,d)=>(n(),r("option",{key:d,value:o.content,"data-name":String(d).replace(".pub","")},y(d)+" ("+y(o.type)+") ",9,We))),128))],32)])):f("",!0),t("div",null,[a(s(C),{for:"keyPublicKey",class:"text-muted-foreground mb-1.5"},{default:i(()=>[...e[26]||(e[26]=[u("Public Key",-1)])]),_:1}),a(s(me),{modelValue:s(c).public_key,"onUpdate:modelValue":e[3]||(e[3]=o=>s(c).public_key=o),id:"keyPublicKey",rows:"4",required:"",placeholder:"ssh-ed25519 AAAA...",class:"w-full font-mono text-sm"},null,8,["modelValue"])])]),t("div",Xe,[a(s(p),{type:"button",onClick:V,variant:"ghost"},{default:i(()=>[...e[27]||(e[27]=[u("Cancel",-1)])]),_:1}),a(s(p),{type:"submit",disabled:s(c).processing,variant:"secondary"},{default:i(()=>[...e[28]||(e[28]=[u(" Save ",-1)])]),_:1},8,["disabled"])])],32)]),_:1},8,["show","title"]),a(z,{show:M.value,title:v.value?"Edit Template":"Add Template",onClose:N},{default:i(()=>[t("form",{onSubmit:E(te,["prevent"])},[t("div",Je,[v.value?(n(),r("div",Ze,[e[30]||(e[30]=t("span",{class:"font-medium"},"Repository:",-1)),u(" "+y(v.value.repo_url),1)])):(n(),r("div",Qe,[a(s(C),{for:"templateRepoUrl",class:"text-muted-foreground mb-1.5"},{default:i(()=>[...e[29]||(e[29]=[u("Repository URL",-1)])]),_:1}),a(s(B),{modelValue:s(m).repo_url,"onUpdate:modelValue":e[4]||(e[4]=o=>s(m).repo_url=o),onBlur:le,type:"text",id:"templateRepoUrl",required:"",placeholder:"owner/repo or https://github.com/owner/repo",class:"w-full"},null,8,["modelValue"])])),t("div",null,[a(s(C),{for:"templateDisplayName",class:"text-muted-foreground mb-1.5"},{default:i(()=>[...e[31]||(e[31]=[u("Display Name",-1)])]),_:1}),a(s(B),{modelValue:s(m).display_name,"onUpdate:modelValue":e[5]||(e[5]=o=>s(m).display_name=o),type:"text",id:"templateDisplayName",required:"",placeholder:"e.g., Laravel, Next.js Starter",class:"w-full"},null,8,["modelValue"])])]),t("div",et,[a(s(p),{type:"button",onClick:N,variant:"ghost"},{default:i(()=>[...e[32]||(e[32]=[u(" Cancel ",-1)])]),_:1}),a(s(p),{type:"submit",disabled:s(m).processing,variant:"secondary"},{default:i(()=>[u(y(v.value?"Update":"Add"),1)]),_:1},8,["disabled"])])],32)]),_:1},8,["show","title"])],64))}});export{rt as default};
