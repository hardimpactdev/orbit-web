import{I as Y,d as we,y as Ce,r as f,q as $e,B as Se,c as o,g as a,a as e,u as s,h as Pe,f as p,t as c,s as Ve,w as d,e as z,b as u,o as i,S as Le,n as P,F as v,E as ne,H as Ie,i as D,l as J,T as Q,P as Ue,U as F,M as w}from"./app-D43GO3N8.js";import{u as Te}from"./services-Dy8OEhPs.js";import{a as _}from"./axios-CKxr9RUk.js";import{I as h,Y as ie,d as le,e as ae,f as oe,B as N,$ as re,D as Ae}from"./craft-ui-aQagzPT3.js";import{L as B}from"./loader-circle-BVZ-cAKz.js";import{T as je}from"./triangle-alert-DTrswVUG.js";import{R as ce}from"./refresh-cw-vEUiR2_Z.js";import{T as He}from"./trash-2-DAy_P5tK.js";import{C as Re}from"./code-19hQXvds.js";import{Z as De}from"./zap-e8NeAZVd.js";import{X as Ee}from"./x-CcrxcTcI.js";const Me=Y("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);const Oe=Y("hard-drive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);const Fe=Y("lock-open",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);const Ne=Y("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Be={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between mb-8"},Ye={class:"flex items-center gap-3"},We={class:"text-2xl font-semibold tracking-tight text-zinc-100"},qe={key:0,class:"px-2 py-0.5 text-xs font-mono bg-zinc-800 text-zinc-400 rounded-full"},Ze={class:"rounded-lg border border-zinc-800 bg-zinc-900/50 p-4 mb-6"},Je={class:"flex items-center justify-between"},Qe={class:"flex items-center gap-4"},Xe={class:"flex h-10 w-10 items-center justify-center rounded-lg bg-lime-500/15"},Ge={class:"text-sm font-medium text-zinc-100"},Ke={class:"flex items-center gap-2 mt-0.5"},et={class:"relative flex h-2.5 w-2.5"},tt={key:0,class:"absolute inline-flex h-full w-full rounded-full bg-lime-400 opacity-75 animate-ping"},st={key:0,class:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6"},nt={class:"flex flex-col gap-1 p-4 rounded-lg bg-zinc-800/30 border border-zinc-800"},it={class:"text-2xl font-semibold text-zinc-100 tabular-nums"},lt={class:"flex flex-col gap-1 p-4 rounded-lg bg-zinc-800/30 border border-zinc-800"},at={class:"text-2xl font-semibold text-zinc-100 tabular-nums"},ot={class:"flex flex-col gap-1 p-4 rounded-lg bg-zinc-800/30 border border-zinc-800"},rt={class:"text-2xl font-semibold text-zinc-100 tabular-nums"},ct={key:0,class:"text-xs text-zinc-500"},dt={class:"flex flex-col gap-1 p-4 rounded-lg bg-zinc-800/30 border border-zinc-800"},ut={class:"rounded-lg border border-zinc-800 bg-zinc-900/50 mb-6"},vt={class:"flex items-center justify-between p-4 border-b border-zinc-800"},mt={class:"p-4 space-y-4"},xt={class:"flex items-start gap-3"},ft={class:"flex h-5 w-5 items-center justify-center rounded-full bg-lime-500/15 mt-0.5"},pt={class:"text-sm text-lime-400 font-medium break-all"},ht={class:"flex items-center gap-6 text-sm"},gt={class:"ml-1 text-zinc-300 font-mono"},bt={class:"flex items-start gap-3"},yt={class:"flex h-5 w-5 items-center justify-center rounded-full bg-amber-500/15 mt-0.5"},zt={key:1,class:"text-zinc-500 text-sm"},kt={class:"rounded-lg border border-zinc-800 bg-zinc-900/50 mb-6"},_t={class:"flex items-center justify-between p-4 border-b border-zinc-800"},wt={key:0,class:"p-4 space-y-4"},Ct={key:0,class:"text-zinc-500 text-sm"},$t={class:"text-sm text-zinc-100 font-mono bg-zinc-800/50 rounded px-2 py-1.5"},St={key:0},Pt={key:1,class:"text-zinc-500"},Vt={class:"flex items-center gap-8"},Lt={class:"text-sm text-zinc-100 font-mono"},It={class:"text-sm text-zinc-100 font-mono"},Ut={key:1,class:"p-4 space-y-4"},Tt={class:"space-y-2"},At=["onClick"],jt={class:"mt-1 text-xs text-zinc-500"},Ht={class:"flex gap-3 pt-2"},Rt={class:"rounded-lg border border-zinc-800 bg-zinc-900/50 mb-6"},Dt={class:"flex items-center justify-between p-4 border-b border-zinc-800"},Et={class:"flex items-center gap-3"},Mt={class:"text-xs text-zinc-500"},Ot={class:"flex items-center gap-2"},Ft={class:"p-4"},Nt={key:0,class:"py-8 text-center text-zinc-500"},Bt={class:"grid md:grid-cols-2 gap-x-8"},Yt={class:"flex items-center gap-3"},Wt={class:"text-sm font-medium text-zinc-100"},qt={class:"text-xs text-zinc-500 font-mono"},Zt={key:0},Jt={key:0,class:"py-8 text-center text-zinc-500 text-sm"},Qt={class:"rounded-lg border border-zinc-800 bg-zinc-900/50"},Xt={class:"flex items-center justify-between p-4 border-b border-zinc-800"},Gt={class:"flex items-center gap-3"},Kt={class:"text-xs text-zinc-500"},es={class:"flex items-center gap-2"},ts={key:0,class:"py-8 text-center text-zinc-500"},ss={key:1,class:"py-8 text-center text-zinc-500 text-sm"},ns={key:2},is={class:"grid grid-cols-[1fr_100px_1fr_140px] gap-4 px-4 py-3 items-center border-b border-zinc-800/50 hover:bg-zinc-800/20 transition-colors group"},ls={class:"flex items-center gap-2 min-w-0"},as=["onClick"],os={key:1,class:"w-4 flex-shrink-0"},rs={class:"flex h-8 w-8 items-center justify-center rounded-md bg-lime-500/15 flex-shrink-0"},cs={class:"font-medium text-zinc-100 truncate"},ds={class:"flex items-center gap-1"},us=["onClick"],vs=["title"],ms={class:"flex items-center justify-end gap-1 opacity-40 group-hover:opacity-100 transition-opacity"},xs={class:"flex items-center gap-2 pl-6 min-w-0"},fs={class:"flex h-8 w-8 items-center justify-center rounded-md bg-blue-500/15 flex-shrink-0"},ps={class:"font-medium text-zinc-300 truncate"},hs={class:"text-zinc-500 text-xs font-mono"},gs=["title"],bs={class:"flex items-center justify-end gap-1 opacity-40 group-hover:opacity-100 transition-opacity"},Is=we({__name:"Show",props:{environment:{},installation:{},editor:{},remoteApiUrl:{}},setup(m){const b=m,V=n=>b.remoteApiUrl?`${b.remoteApiUrl}${n}`:`/api/environments/${b.environment.id}${n}`,C=f(null),x=f("idle"),W=f("Connection not tested"),y=Te(),$=f(!0),E=f(!1),L=f([]),I=f(!0),S=f({}),U=f(new Set),g=f(null),q=f(!0),T=f(!1),M=f(!1),k=f([]),A=f(""),O=f("8.4"),j=f(!1),de=Ve(()=>g.value?.tld||"test"),Z={dns:"53","php-83":"-","php-84":"-",caddy:"80, 443",postgres:"5432",redis:"6379",mailpit:"1025, 8025"},ue={dns:"DNS Server","php-83":"PHP 8.3 (FrankenPHP)","php-84":"PHP 8.4 (FrankenPHP)",caddy:"Web Server",postgres:"PostgreSQL Database",redis:"Redis Cache",mailpit:"Mail Catcher"};async function X(){x.value="testing",W.value="Testing connection...";try{const{data:n}=await _.post(`/api/environments/${b.environment.id}/test-connection`,{},{signal:C.value?.signal});x.value=n.success?"success":"error",W.value=n.message}catch(n){if(F.isCancel(n))return;x.value="error",W.value="Connection failed"}}async function G(){$.value=!0;try{await y.fetchServices(V(""))}catch(n){console.error("Failed to load services status:",n)}finally{$.value=!1}}async function H(){I.value=!0;try{const{data:n}=await _.get(V("/sites"),{signal:C.value?.signal});n.success&&n.data&&(L.value=n.data.sites||[])}catch(n){if(F.isCancel(n))return}finally{I.value=!1}}async function K(){try{const{data:n}=await _.get(V("/worktrees"),{signal:C.value?.signal});if(n.success&&n.data?.worktrees){const t={};for(const l of n.data.worktrees)t[l.site]||(t[l.site]=[]),t[l.site].push(l);S.value=t}}catch(n){if(F.isCancel(n))return}}async function ve(){q.value=!0;try{const{data:n}=await _.get(V("/config"),{signal:C.value?.signal});n.success&&(g.value=n.data)}catch(n){if(F.isCancel(n))return}finally{q.value=!1}}async function me(){E.value=!0;try{const n=await y.restartAll(V(""));n.success?(w.success("Services restarted successfully"),await G()):w.error("Failed to restart services",{description:n.error||"Unknown error"})}catch{w.error("Failed to restart services")}finally{E.value=!1}}async function xe(n,t){try{const l=encodeURIComponent(n),{data:r}=await _.post(`/sites/${l}/php`,{version:t});r.success&&await H()}catch{}}async function fe(n){try{const t=encodeURIComponent(n),{data:l}=await _.post(`/sites/${t}/php/reset`,{});l.success&&await H()}catch{}}function ee(n,t){const l=`${t?"https":"http"}://${n}`;window.open(l,"_blank")}function te(n){if(!n){w.error("No path available for this site");return}let t;if(b.environment.is_local)t=`${b.editor.scheme}://file${n}`;else{const l=`${b.environment.user}@${b.environment.host}`;t=`${b.editor.scheme}://vscode-remote/ssh-remote+${l}${n}?windowId=_blank`}window.open(t,"_blank")}async function pe(n,t){if(confirm(`Remove worktree "${t}" from ${n}? This will remove the subdomain routing.`))try{const{data:l}=await _.delete(V(`/worktrees/${n}/${t}`));l.success&&(await K(),await H())}catch{}}async function he(){j.value=!0;try{const{data:n}=await _.post("/cli/install",{});n.success?window.location.reload():w.error("Failed to install CLI",{description:n.error||"Unknown error"})}catch{}finally{j.value=!1}}function ge(n){U.value.has(n)?U.value.delete(n):U.value.add(n)}function be(){g.value&&(k.value=[...g.value.paths||[]],k.value.length===0&&k.value.push(""),A.value=g.value.tld||"test",O.value=g.value.default_php_version||"8.4"),T.value=!0}function ye(){T.value=!1}function ze(){k.value.push("")}function ke(n){k.value.splice(n,1)}async function _e(){const n=k.value.filter(t=>t.trim()!=="");if(n.length===0){w.error("Validation Error",{description:"Please add at least one site path"});return}M.value=!0;try{const{data:t}=await _.post(`/environments/${b.environment.id}/config`,{paths:n,tld:A.value.trim()||"test",default_php_version:O.value});t.success?(g.value=t.data,T.value=!1,w.success("Configuration saved"),await H()):w.error("Failed to save config",{description:t.error||"Unknown error"})}catch{}finally{M.value=!1}}let se=null;return Ce(()=>{C.value=new AbortController,se=$e.on("before",()=>{C.value?.abort()}),y.setActiveEnvironment(b.environment.id),X(),b.installation.installed&&(ve(),G(),H(),K())}),Se(()=>{se?.(),C.value?.abort()}),(n,t)=>(i(),o(v,null,[a(s(Pe),{title:m.environment.name},null,8,["title"]),e("div",null,[e("header",Be,[e("div",Ye,[e("h1",We,c(m.environment.name),1),g.value?(i(),o("span",qe,"."+c(de.value),1)):p("",!0)]),a(s(h),{onClick:X,variant:"outline",size:"sm",class:"bg-transparent border-zinc-700 text-zinc-300 hover:bg-zinc-800 hover:text-zinc-100"},{default:d(()=>[x.value==="testing"?(i(),z(s(B),{key:0,class:"w-4 h-4 mr-1.5 animate-spin"})):p("",!0),t[2]||(t[2]=u(" Test Connection ",-1))]),_:1})]),e("div",Ze,[e("div",Je,[e("div",Qe,[e("div",Xe,[m.environment.is_local?(i(),z(s(Oe),{key:0,class:"h-5 w-5 text-lime-400"})):(i(),z(s(Le),{key:1,class:"h-5 w-5 text-lime-400"}))]),e("div",null,[e("p",Ge,c(m.environment.is_local?"Local Machine":`${m.environment.user}@${m.environment.host}`),1),e("div",Ke,[e("span",et,[x.value==="success"?(i(),o("span",tt)):p("",!0),e("span",{class:P(["relative inline-flex rounded-full h-2.5 w-2.5",{"bg-zinc-600":x.value==="idle","bg-amber-400":x.value==="testing","bg-lime-400":x.value==="success","bg-red-400":x.value==="error"}])},null,2)]),e("span",{class:P(["text-sm",x.value==="success"?"text-zinc-100":"text-zinc-500"])},c(x.value==="success"?"Connected":x.value==="error"?"Disconnected":x.value==="testing"?"Testing...":"Not tested"),3)])])]),t[3]||(t[3]=e("div",{class:"text-right hidden sm:block"},[e("p",{class:"text-xs text-zinc-500"},"Last sync"),e("p",{class:"text-sm text-zinc-300"},"Just now")],-1))])]),m.installation.installed?(i(),o("div",st,[e("div",nt,[t[4]||(t[4]=e("span",{class:"text-xs text-zinc-500 uppercase tracking-wide"},"Sites",-1)),e("span",it,[I.value?(i(),o(v,{key:0},[u("-")],64)):(i(),o(v,{key:1},[u(c(L.value.length),1)],64))])]),e("div",lt,[t[5]||(t[5]=e("span",{class:"text-xs text-zinc-500 uppercase tracking-wide"},"Workspaces",-1)),e("span",at,[I.value?(i(),o(v,{key:0},[u("-")],64)):(i(),o(v,{key:1},[u(c(Object.keys(S.value).length),1)],64))])]),e("div",ot,[t[6]||(t[6]=e("span",{class:"text-xs text-zinc-500 uppercase tracking-wide"},"Services",-1)),e("span",rt,[$.value?(i(),o(v,{key:0},[u("-")],64)):(i(),o(v,{key:1},[u(c(s(y).servicesRunning)+"/"+c(s(y).servicesTotal),1)],64))]),!$.value&&s(y).servicesRunning===s(y).servicesTotal?(i(),o("span",ct,"All healthy")):p("",!0)]),e("div",dt,[t[7]||(t[7]=e("span",{class:"text-xs text-zinc-500 uppercase tracking-wide"},"Status",-1)),e("span",{class:P(["text-2xl font-semibold tabular-nums",x.value==="success"?"text-lime-400":x.value==="error"?"text-red-400":"text-zinc-500"])},c(x.value==="success"?"Online":x.value==="error"?"Offline":"Checking"),3)])])):p("",!0),e("div",ut,[e("div",vt,[t[9]||(t[9]=e("h2",{class:"text-sm font-medium text-zinc-100"},"Orbit Installation",-1)),m.installation.installed?(i(),z(s(h),{key:0,variant:"ghost",size:"sm",class:"h-7 px-2 text-xs text-zinc-400 hover:text-zinc-100"},{default:d(()=>[a(s(ne),{class:"h-3.5 w-3.5 mr-1"}),t[8]||(t[8]=u(" Open ",-1))]),_:1})):p("",!0)]),e("div",mt,[m.installation.installed?(i(),o(v,{key:0},[e("div",xt,[e("div",ft,[a(s(Ie),{class:"h-3 w-3 text-lime-400"})]),e("div",null,[e("p",pt,c(m.installation.path),1),t[10]||(t[10]=e("p",{class:"text-xs text-zinc-500 mt-1"},"Installation verified",-1))])]),e("div",ht,[e("div",null,[t[11]||(t[11]=e("span",{class:"text-zinc-500"},"Version:",-1)),e("span",gt,c(m.installation.version),1)])])],64)):(i(),o(v,{key:1},[e("div",bt,[e("div",yt,[a(s(je),{class:"h-3 w-3 text-amber-400"})]),t[12]||(t[12]=e("div",null,[e("p",{class:"text-sm text-amber-400 font-medium"},"Orbit CLI not found"),e("p",{class:"text-xs text-zinc-500 mt-1"},"Install to manage sites and services")],-1))]),m.environment.is_local?(i(),z(s(h),{key:0,onClick:he,disabled:j.value,variant:"outline",size:"sm",class:"bg-transparent border-zinc-700 text-zinc-300 hover:bg-zinc-800"},{default:d(()=>[j.value?(i(),z(s(B),{key:0,class:"w-4 h-4 animate-spin mr-1.5"})):(i(),z(s(Me),{key:1,class:"w-4 h-4 mr-1.5"})),u(" "+c(j.value?"Installing...":"Install Orbit CLI"),1)]),_:1},8,["disabled"])):(i(),o("p",zt," Install orbit on this environment to manage sites. "))],64))])]),m.installation.installed?(i(),o(v,{key:1},[e("div",kt,[e("div",_t,[t[14]||(t[14]=e("h2",{class:"text-sm font-medium text-zinc-100"},"Configuration",-1)),T.value?p("",!0):(i(),z(s(h),{key:0,onClick:be,variant:"ghost",size:"sm",class:"h-7 px-2 text-xs text-zinc-400 hover:text-zinc-100"},{default:d(()=>[...t[13]||(t[13]=[u(" Edit ",-1)])]),_:1}))]),T.value?(i(),o("div",Ut,[e("div",null,[t[18]||(t[18]=e("label",{class:"block text-xs text-zinc-500 mb-2"},"Site Paths",-1)),e("div",Tt,[(i(!0),o(v,null,D(k.value,(l,r)=>(i(),o("div",{key:r,class:"flex items-center gap-2"},[a(s(ie),{modelValue:k.value[r],"onUpdate:modelValue":R=>k.value[r]=R,type:"text",placeholder:"/home/user/sites",class:"flex-1 font-mono text-sm"},null,8,["modelValue","onUpdate:modelValue"]),e("button",{onClick:R=>ke(r),class:"text-zinc-500 hover:text-red-400 p-2 transition-colors"},[a(s(He),{class:"w-4 h-4"})],8,At)]))),128))]),e("button",{onClick:ze,class:"mt-2 text-xs text-zinc-400 hover:text-zinc-200 transition-colors"}," + Add path ")]),e("div",null,[t[19]||(t[19]=e("label",{for:"config-tld",class:"block text-xs text-zinc-500 mb-1"},"TLD",-1)),a(s(ie),{modelValue:A.value,"onUpdate:modelValue":t[0]||(t[0]=l=>A.value=l),type:"text",id:"config-tld",placeholder:"test",class:"w-full max-w-xs font-mono text-sm"},null,8,["modelValue"]),e("p",jt," Sites will be accessible at sitename."+c(A.value||"test"),1)]),e("div",null,[t[22]||(t[22]=e("label",{for:"config-php",class:"block text-xs text-zinc-500 mb-1"},"Default PHP Version",-1)),a(s(re),{modelValue:O.value,"onUpdate:modelValue":t[1]||(t[1]=l=>O.value=l)},{default:d(()=>[a(s(le),{class:"w-full max-w-xs"},{default:d(()=>[a(s(ae),{placeholder:"Select PHP version"})]),_:1}),a(s(oe),null,{default:d(()=>[a(s(N),{value:"8.3"},{default:d(()=>[...t[20]||(t[20]=[u("PHP 8.3",-1)])]),_:1}),a(s(N),{value:"8.4"},{default:d(()=>[...t[21]||(t[21]=[u("PHP 8.4",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),e("div",Ht,[a(s(h),{onClick:_e,disabled:M.value,size:"sm",class:"bg-lime-500 hover:bg-lime-600 text-zinc-950"},{default:d(()=>[u(c(M.value?"Saving...":"Save changes"),1)]),_:1},8,["disabled"]),a(s(h),{onClick:ye,variant:"ghost",size:"sm"},{default:d(()=>[...t[23]||(t[23]=[u("Cancel",-1)])]),_:1})])])):(i(),o("div",wt,[q.value?(i(),o("div",Ct," Loading configuration... ")):g.value?(i(),o(v,{key:1},[e("div",null,[t[15]||(t[15]=e("p",{class:"text-xs text-zinc-500 mb-1"},"Site Paths",-1)),e("p",$t,[g.value.paths?.length?(i(!0),o(v,{key:0},D(g.value.paths,(l,r)=>(i(),o("span",{key:l},[u(c(l),1),r<g.value.paths.length-1?(i(),o("br",St)):p("",!0)]))),128)):(i(),o("span",Pt,"No paths configured"))])]),e("div",Vt,[e("div",null,[t[16]||(t[16]=e("p",{class:"text-xs text-zinc-500 mb-1"},"TLD",-1)),e("p",Lt,"."+c(g.value.tld||"test"),1)]),e("div",null,[t[17]||(t[17]=e("p",{class:"text-xs text-zinc-500 mb-1"},"Default PHP",-1)),e("p",It,c(g.value.default_php_version||"8.4"),1)])])],64)):p("",!0)]))]),e("div",Rt,[e("div",Dt,[e("div",Et,[t[24]||(t[24]=e("h2",{class:"text-sm font-medium text-zinc-100"},"Services",-1)),e("span",Mt,[$.value?(i(),o(v,{key:0},[u("Loading...")],64)):(i(),o(v,{key:1},[u(c(s(y).servicesRunning)+"/"+c(s(y).servicesTotal)+" running",1)],64))])]),e("div",Ot,[a(s(h),{onClick:me,disabled:$.value||E.value,variant:"outline",size:"sm",class:"h-7 px-2 text-xs bg-transparent border-zinc-700 text-zinc-300 hover:bg-zinc-800"},{default:d(()=>[a(s(ce),{class:P(["h-3.5 w-3.5 mr-1",{"animate-spin":E.value}])},null,8,["class"]),t[25]||(t[25]=u(" Restart All ",-1))]),_:1},8,["disabled"]),a(s(h),{"as-child":"",variant:"ghost",size:"sm",class:"h-7 px-2 text-xs text-zinc-400 hover:text-zinc-100"},{default:d(()=>[a(s(J),{href:`/environments/${m.environment.id}/services`},{default:d(()=>[t[26]||(t[26]=u(" View all ",-1)),a(s(Q),{class:"h-3.5 w-3.5 ml-1"})]),_:1},8,["href"])]),_:1})])]),e("div",Ft,[$.value?(i(),o("div",Nt,[a(s(B),{class:"h-5 w-5 mx-auto mb-2 text-zinc-600 animate-spin"}),t[27]||(t[27]=e("p",{class:"text-sm"},"Loading services...",-1))])):(i(),o(v,{key:1},[e("div",Bt,[(i(!0),o(v,null,D(s(y).services,(l,r)=>(i(),o("div",{key:r,class:"flex items-center justify-between py-3 border-b border-zinc-800/50 last:border-b-0"},[e("div",Yt,[e("span",{class:P(["h-2 w-2 rounded-full",l.status==="running"?"bg-lime-400":"bg-zinc-600"])},null,2),e("div",null,[e("p",Wt,c(ue[r]||r),1),e("p",qt,[u(c(r)+" ",1),Z[r]&&Z[r]!=="-"?(i(),o("span",Zt," Â· "+c(Z[r]),1)):p("",!0)])])]),e("span",{class:P(["text-xs font-medium",l.status==="running"?"text-lime-400":"text-zinc-500"])},c(l.status==="running"?"Running":"Stopped"),3)]))),128))]),s(y).servicesTotal===0?(i(),o("div",Jt," No services found ")):p("",!0)],64))])]),e("div",Qt,[e("div",Xt,[e("div",Gt,[t[28]||(t[28]=e("h2",{class:"text-sm font-medium text-zinc-100"},"Sites",-1)),e("span",Kt,c(L.value.length)+" total",1)]),e("div",es,[a(s(h),{"as-child":"",size:"sm",class:"bg-lime-500 hover:bg-lime-600 text-zinc-950"},{default:d(()=>[a(s(J),{href:`/environments/${m.environment.id}/sites/create`},{default:d(()=>[a(s(Ue),{class:"w-4 h-4 mr-1.5"}),t[29]||(t[29]=u(" New Site ",-1))]),_:1},8,["href"])]),_:1}),a(s(h),{"as-child":"",variant:"ghost",size:"sm",class:"h-7 px-2 text-xs text-zinc-400 hover:text-zinc-100"},{default:d(()=>[a(s(J),{href:`/environments/${m.environment.id}/sites`},{default:d(()=>[t[30]||(t[30]=u(" View all ",-1)),a(s(Q),{class:"h-3.5 w-3.5 ml-1"})]),_:1},8,["href"])]),_:1})])]),t[36]||(t[36]=e("div",{class:"grid grid-cols-[1fr_100px_1fr_140px] gap-4 px-4 py-3 bg-zinc-800/30 border-b border-zinc-800 text-xs font-medium text-zinc-500 uppercase tracking-wide"},[e("div",null,"Site"),e("div",null,"PHP"),e("div",null,"Path"),e("div",{class:"text-right"},"Actions")],-1)),I.value?(i(),o("div",ts,[a(s(B),{class:"h-5 w-5 mx-auto mb-2 text-zinc-600 animate-spin"}),t[31]||(t[31]=u(" Loading sites... ",-1))])):L.value.length===0?(i(),o("div",ss," No sites configured. ")):(i(),o("div",ns,[(i(!0),o(v,null,D(L.value,l=>(i(),o(v,{key:l.name},[e("div",is,[e("div",ls,[S.value[l.name]?.length?(i(),o("button",{key:0,onClick:r=>ge(l.name),class:"text-zinc-500 hover:text-zinc-300 transition-colors flex-shrink-0"},[a(s(Q),{class:P(["w-4 h-4 transform transition-transform",{"rotate-90":U.value.has(l.name)}])},null,8,["class"])],8,as)):(i(),o("span",os)),e("div",rs,[l.secure?(i(),z(s(Ne),{key:0,class:"w-4 h-4 text-lime-400"})):(i(),z(s(Fe),{key:1,class:"w-4 h-4 text-zinc-500"}))]),e("span",cs,c(l.domain),1),S.value[l.name]?.length?(i(),z(s(Ae),{key:2,variant:"secondary",class:"flex-shrink-0 text-xs"},{default:d(()=>[u(c(S.value[l.name].length),1)]),_:2},1024)):p("",!0)]),e("div",ds,[a(s(re),{"model-value":l.php_version||"8.4","onUpdate:modelValue":r=>xe(l.name,String(r))},{default:d(()=>[a(s(le),{class:"h-7 w-[80px] text-xs bg-zinc-800/50 border-zinc-700 text-zinc-100",size:"sm"},{default:d(()=>[a(s(ae))]),_:1}),a(s(oe),null,{default:d(()=>[a(s(N),{value:"8.3"},{default:d(()=>[...t[32]||(t[32]=[u("8.3",-1)])]),_:1}),a(s(N),{value:"8.4"},{default:d(()=>[...t[33]||(t[33]=[u("8.4",-1)])]),_:1})]),_:1})]),_:1},8,["model-value","onUpdate:modelValue"]),l.has_custom_php?(i(),o("button",{key:0,onClick:r=>fe(l.name),class:"text-zinc-500 hover:text-red-400 transition-colors",title:"Reset to default"},[a(s(ce),{class:"w-3 h-3"})],8,us)):p("",!0)]),e("div",{class:"text-zinc-500 text-sm font-mono truncate",title:l.path},c(l.path),9,vs),e("div",ms,[a(s(h),{onClick:r=>ee(l.domain,l.secure??!1),variant:"ghost",size:"sm",class:"h-7 px-2 text-xs text-zinc-400 hover:text-zinc-100"},{default:d(()=>[a(s(ne),{class:"w-3.5 h-3.5 mr-1"}),t[34]||(t[34]=u(" Open ",-1))]),_:1},8,["onClick"]),a(s(h),{onClick:r=>te(l.path||""),variant:"ghost",size:"icon-sm",class:"h-7 w-7 text-zinc-500 hover:text-zinc-300"},{default:d(()=>[a(s(Re),{class:"w-3.5 h-3.5"})]),_:1},8,["onClick"])])]),U.value.has(l.name)&&S.value[l.name]?.length?(i(!0),o(v,{key:0},D(S.value[l.name],r=>(i(),o("div",{key:`${l.name}-${r.name}`,class:"grid grid-cols-[1fr_100px_1fr_140px] gap-4 px-4 py-3 items-center border-b border-zinc-800/50 bg-zinc-800/20 hover:bg-zinc-800/30 transition-colors group"},[e("div",xs,[e("div",fs,[a(s(De),{class:"w-4 h-4 text-blue-400"})]),e("span",ps,c(r.domain),1)]),e("div",hs,c(r.branch||"-"),1),e("div",{class:"text-zinc-500 text-xs font-mono truncate",title:r.path},c(r.path),9,gs),e("div",bs,[a(s(h),{onClick:R=>ee(r.domain,r.secure??!0),variant:"ghost",size:"sm",class:"h-7 px-2 text-xs text-zinc-400 hover:text-zinc-100"},{default:d(()=>[...t[35]||(t[35]=[u(" Open ",-1)])]),_:1},8,["onClick"]),a(s(h),{onClick:R=>te(r.path),variant:"ghost",size:"sm",class:"h-7 px-2 text-xs text-zinc-400 hover:text-zinc-100"},{default:d(()=>[u(c(m.editor.name),1)]),_:1},8,["onClick"]),a(s(h),{onClick:R=>pe(l.name,r.name),variant:"ghost",size:"icon-sm",class:"h-7 w-7 text-zinc-500 hover:text-red-400",title:"Unlink worktree"},{default:d(()=>[a(s(Ee),{class:"w-3.5 h-3.5"})]),_:1},8,["onClick"])])]))),128)):p("",!0)],64))),128))]))])],64)):p("",!0)])],64))}});export{Is as default};
